/*! ithoughts-tooltip-glossary build on 2017-12-19 09:52:50 for v3.0.2 */
"use strict";function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}if(!g.done)return Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)});a(h)}return d("next")})}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){a("regenerator-runtime/runtime");var d=iThoughts.v5,e=d.$,f=d.isNA,g=iThoughtsTooltipGlossary,h=["href","title"],i=function(a){return h.includes(a)||a.startsWith("data-")?a:"data-"+a},j=function(a){var b={};return Array.prototype.slice.call(a.attributes,0).forEach(function(a){b[a.nodeName]=a.nodeValue}),b},k=function(a){return a.tagName&&(a=j(a)),function(b,c){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(b=i(b)),a.hasOwnProperty(b)){var d=a[b];return delete a[b],d}return c}},l=function(a,b,c){var d=!1;return b.forEach(function(b){void 0!==a&&a.hasOwnProperty(b)?a=a[b]:d=!0}),d?c:a},m=function(a){return"string"==typeof a&&("1"===a||"true"===a.toLowerCase())||"number"==typeof a&&a>0},n=function(a){return e("<textarea />").text(a).html()},o=function(a){return e("<textarea />").html(a).text()},p=function(a,b,c){var h=d.makeLoader();return new Promise(function(d,i){var j={action:"ithoughts_tt_gl_"+a};f(c)||(j._wpnonce=c),f(b)||(j.data=b),e.ajax({method:"POST",async:!0,url:g.admin_ajax,data:j,success:function(a){return h.remove(),d(a)},error:function(a){return h.remove(),g.error("Error while doing XHR request:",a),i(a)}})})};b.exports={maybePrefixAttribute:i,extractAttrs:j,generateTakeAttr:k,get:l,isTrueValue:m,htmlEncode:n,htmlDecode:o,sendAjaxQuery:p}},{"regenerator-runtime/runtime":6}],2:[function(a,b,c){var d=iThoughtsTooltipGlossary,e=d.replaceQuotes,f=iThoughts.v5.isNA,g=function(){function a(b){_classCallCheck(this,a),this.opts={};for(var c in b)this.addOpt(c,b[c])}return _createClass(a,[{key:"addOpt",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=e(a.trim(),!0),!a.match(/^[\w_\-]*$/))return this;b=String(b).trim(),b=!f(c)&&c?b.replace(/"/g,"&aquot;").replace(/\n/g,"<br/>"):e(b,!0),this.opts[a]=b}},{key:"maybeAddOpt",value:function(a,b,c){a&&this.addOpt(b,c)}},{key:"toString",value:function(){var b=this;return Object.keys(this.opts).map(function(c){return a.generateAttr(c,b.opts[c])}).join(" ")}}],[{key:"generateAttr",value:function(a,b){return a+'="'+b+'"'}}]),a}();b.exports=g},{}],3:[function(a,b,c){a("regenerator-runtime/runtime");var d=a("./tinymce-utils"),e=(a("./tinymce-filters"),iThoughts.v5),f=iThoughtsTooltipGlossary,g=iThoughtsTooltipGlossaryEditor,h=e.$,i=e.$d,j=e.$w;i.ready(function(){var a="";if(1===h("#ithoughts_tt_gl-tooltip-form-container").length)a="TIP";else{if(1!==h("#ithoughts_tt_gl-list-form-container").length)return void f.error("Does not contains a tooltip form nor a list form, exit");a="LIST"}f.info("Opening a form for "+a);var b=function(a,b){a.click(function(){var a=h(this);a.parent().find(".active").removeClass("active"),a.addClass("active");var c=a.index();a.parent().parent().find(" > .active").removeClass("active"),h(a.parent().parent().children()[c+1]).addClass("active"),b&&b(c)}),a.filter(".active").click()};"TIP"===a?function(){function a(a){try{tinymce.EditorManager.execCommand("mceRemoveEditor",!0,a)}catch(b){iThoughtsTooltipGlossary.warn("Force cleaning needed: ",b),tinymce.EditorManager.editors=tinymce.EditorManager.editors.filter(function(b){return b.id!==a})}}function c(b){setTimeout(function(){a("ithoughts_tt_gl-tooltip-content")},500),g.finishTipTinymce(b),delete g.finishTipTinymce}var e;b(h("#ithoughts_tt_gl-tooltip-form .tabs li"),function(a){h("#ithoughts_tt_gl_link").prop("disabled",0===a)}),b(h("#ithoughts_tt_gl-tooltip-form-options .tabs li")),h(".modeswitcher").on("click keyup change",function(){var a=this.id;h("[data-"+a+"]:not([data-"+a+'="mediatip-'+this.value+'-type"])').hide(),h("[data-"+a+'~="mediatip-'+this.value+'-type"]').show()}).keyup(),function(a){a.each(function(a,b){for(;null==b.getAttribute("id");){var c="editor"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10);0===h(c).length&&b.setAttribute("id",c)}var d=b.getAttribute("id"),e=b.value;tinymce.init({selector:"#"+d,menubar:!1,external_plugins:{code:g.base_assets+"/deps/tinymce/code/plugin.min.js",wordcount:g.base_assets+"/deps/tinymce/wordcount/plugin.min.js"},plugins:"wplink",toolbar:["styleselect | bold italic underline link | bullist numlist | alignleft aligncenter alignright alignjustify | code"],min_height:70,height:70,resize:!1});var i=setInterval(function(){var a=tinymce.get(d);a&&a.getDoc()&&a.getBody()&&(f.log("Initing subeditor with content ",JSON.stringify(e)),clearInterval(i),a.setContent(e.replace(/&/g,"&amp;")))},50)})}(h("#ithoughts_tt_gl-tooltip-form-container .tinymce")),h("#ithoughts_tt_gl_select_image").click(function(){var a=wp.media({frame:"post",state:"insert",library:{type:["audio","video","image"]},multiple:!1});a.on("insert",function(){var b=a.state().get("selection").first();null!=b&&(b=b.toJSON(),h("#image-box-data").val(JSON.stringify({url:b.url,id:b.id,link:b.link})),h("#image-box").html('<img src="'+b.url+'"/>'),h("#mediatip_caption").val(b.caption),h("#ithoughts_tt_gl_link").val(b.link))}),a.open()}),function(){function a(){setTimeout(function(){f.find("*:focus").length||e.is(":focus")||i.addClass("hidden")},100)}function b(){var a=[],b=[];g.terms.map(function(c){var d=c.title.toLowerCase().indexOf(k);if(-1===d&&(d=c.slug.toLowerCase().indexOf(k)),-1!==d)return 0===d?void a.push(c):void b.push(c)});var d=a.concat(b).filter(function(a,b,c){return c.indexOf(a)===b});f.empty();var j=d.length;if(j>0)for(var l=0;l<j;l++){var m=d[l];void 0!==m.thislang&&!1===m.thislang?f.append(h.parseHTML('<div tabindex="0" class="option foreign-language" data-id="'+m.id+'" data-excerpt="'+m.content+'"><p><b>'+m.title+"</b><br><em>"+m.slug+"</em></p></div>")):f.append(h.parseHTML('<div tabindex="0" class="option" data-id="'+m.id+'" data-excerpt="'+m.content+'"><p><b>'+m.title+"</b><br><em>"+m.slug+"</em></p></div>"))}else f.append(h.parseHTML('<p style="text-align:center"><em>No results</em><p>'));i.removeClass("hidden"),setTimeout(c,25),f.find(".option").on("click",function(a){h('[name="glossary_term_id"]').val(a.currentTarget.getAttribute("data-id")),e.val(h(a.currentTarget).find("p > b").text()),i.addClass("hidden")})}function c(){var a=f.offset().top-j.scrollTop(),b=j.height(),c=b-a;i.css({maxHeight:c})}var e=h("#glossary_term"),f=h("#glossary_term_completer"),i=h(".glossary_term_completer_container"),k="",l=null;j.resize(c),e.on("keyup focusin",function(){l&&l.abort(),k=d.removeAccents(h(this).val().toLowerCase()),b();var a=h('#ithoughts_tt_gl-tooltip-form-container [name="_wpnonce"]');l=h.ajax({url:g.admin_ajax,method:"POST",dataType:"json",data:{action:"ithoughts_tt_gl_get_terms_list",search:k,_ajax_nonce:a.val()},complete:function(c){var d=c.responseJSON;if(void 0!==d&&d.success){if(a.val(d.data.nonce_refresh),d.data.searched!==k)return void iThoughtsTooltipGlossary.info("Outdated response");g.terms=d.data.terms,b()}}})}).on("focusout",a).on("keyup",function(){this.removeAttribute("data-term-id")})}(),function(){function a(){for(var a,b=i[0],c=b.elements,d={},e=!0,f=c.length,g=-1,j={},k=h("#attributes-list option").map(function(){return this.value}).toArray(),l=["span","link"];++g<f&&e;){var m=c[g].validity;e&=m.valid,m.valid||c[g].focus()}for(i.find(".ithoughts-tristate").each(function(){h.extend(!0,d,h(this).serializeInputsObject({"-1":!1,0:null,1:!0}[this.dataset.state]))}),a=h.extend(!0,i.serializeObject(),d),g=0;g<2;g++){var n=l[g];j[n]={};for(var o=a["attributes-"+n+"-key"]||[],p=a["attributes-"+n+"-value"]||[],q=0,r=Math.min(o.length,p.length);q<r;q++)if(o[q]&&p[q]){var s=k.indexOf(o[q])>-1?"":"data-";j[n][s+o[q]]=p[q]}delete a["attributes-"+n+"-value"],delete a["attributes-"+n+"-key"]}return a.attributes=j,a}function b(){return 0===h(this).closest(".ithoughts-prototype").length}function c(){var a=h(this),b=a.parent().parent(),c=b.find("input").filter(function(){return this!==a.get(0)});setTimeout(function(){var d=a.closest(".ithoughts-attrs-container").attr("data-attr-family");if(g[d])return void(g[d]=!1);a.val(a.val().trim()),c.val(c.val().trim()),a.val()||c.val()||document.activeElement===a.get(0)||document.activeElement===c.get(0)||b.remove()},100)}var d=h("#ithoughts_tt_gl-tooltip-form-options"),f=h("#ithoughts_tt_gl-tooltip-form"),g={span:!1,link:!1},i=h("#ithoughts_tt_gl-tooltip-form-options form");d.find('input[type="checkbox"].ithoughts-tristate').attr("data-state",function(a,b){return((b||0)-1)%3+2}).change(function(){var a=h(this),b=((a.attr("data-state")||0)-2)%3+1;a.attr("data-state",b),this.checked=1===b,this.indeterminate=0===b}).change(),h("#ithoughts_tt_gl-tinymce-advanced_options").click(function(){d.show(),f.hide()}),h("#ithoughts_tt_gl-tinymce-close-attrs").click(function(){d.hide(),f.show()}),h("#ithoughts_tt_gl-tinymce-validate-attrs").click(function(){e=a(),d.hide(),f.show()}),h("#qtip-keep-open").change(function(){var a,b=h("#qtiptrigger"),c=h("#qtiptriggerText"),d=h([b,c]);return function(){b.prop("disabled",this.checked),c.prop("disabled",!this.checked),d.val(this.checked?"click":a),this.checked?a=b.value:b.disabled=!(c.disabled=!0)}}()),h('[name^="position[my]"]').change(function(){var a="#position[my][",b=h(a+"1]"),c=h(a+"2]"),d=h(c.get(0),b.get(0)),e=h(a+"invert]");return function(){d.prop("required",b.val()||c.val()||e.prop("checked"))}}()),h('[name^="position[at]"]').change(function(){var a="#position[at][",b=h(a+"1]"),c=h(a+"2]"),d=h(c.get(0),b.get(0));return function(){d.prop("required",b.val()||c.val())}}()),h(".kv-pair-link-attrs-add,.kv-pair-span-attrs-add").bind("mouseup touchend",function(){var a=h(this).parent().find(".ithoughts-attrs-container"),d=a.find("input:invalid").filter(b),e=a.attr("data-attr-family");if(g[e]=!0,d.length>0)return g[e]=!0,d.eq(0).focus(),c.call(d.get(0)),void(g[e]=!1);var f=a.find(".ithoughts-prototype"),i=f.clone().removeClass("ithoughts-prototype"),j=["attributes-"+e+"-","-"+(new Date).getTime()];i.find(".dynamicId").each(function(){var a=h(this),b=j[0]+(a.hasClass("dynamicId-key")?"key":"value")+j[1];a.attr("LABEL"===this.tagName?"for":"id",b)}),a.append(i),i.find("input").prop("required",!0).prop("disabled",!1).blur(c).eq(0).focus(),c.call(i.find("input").get(0))}),h(".ithoughts-attrs-container input").blur(c),e=a()}(),h("#mediatip_url_video_link").bind("keyup mouseup change click focusin focusout",function(){var a,b=null,c=this.value,d={youtube:{regex:/^(?:https?:\/\/(?:youtu\.be\/|\w*\.youtube\.\w{2,3}\/watch\?v=)|<iframe .*?src="https?:\/\/\w*\.youtube\.\w{2,3}\/embed\/)([a-zA-Z0-9]*).*$/,embed:'<iframe width="512" height="288" src="https://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>',video:"https://www.youtube.com/watch?v=$1"},dailymotion:{regex:/^(?:https?:\/\/(?:dai\.ly\/|\w*\.dailymotion\.\w{2,3}\/video\/)|<iframe .*?src=".*?\w*\.dailymotion\.\w{2,3}\/embed\/video\/)([a-zA-Z0-9]*).*/,embed:'<iframe width="512" height="288" src="https://www.dailymotion.com/embed/video/$1" frameborder="0" allowfullscreen></iframe>',video:"https://www.dailymotion.com/video/$1"},direct:{regex:/^(.*\.mp4)(\?.*)?$/,embed:'<video width="512" height="288" controls="controls"><source src="$1" type="video/mp4" /></video>',video:"$1"}};for(var e in d)if(a=d[e],c.match(a.regex)){b={embed:c.replace(a.regex,a.embed),video:c.replace(a.regex,a.video)};break}b&&(h("#mediatip_url_video_embed").val(b.embed),h(this).val(b.video))}).keyup(),h("#ithoughts_tt_gl-tinymce-validate").click(function(){var a={type:["glossary","tooltip","mediatip"][h(".tabs li.active").index()],text:h("#ithoughts_tt_gl_text").val(),link:h("#ithoughts_tt_gl_link").val(),opts:e};switch(f.log("Before per-type form data handling:",a),a.type){case"glossary":a=h.extend(a,{glossary_id:h('[name="glossary_term_id"]').val(),disable_auto_translation:h('[name="glossary_disable_auto_translation"]').is(":checked")});break;case"tooltip":a=h.extend(a,{tooltip_content:tinymce.EditorManager.get("ithoughts_tt_gl-tooltip-content").getContent()||h("#ithoughts_tt_gl-tooltip-content").val()});break;case"mediatip":switch(a=h.extend(a,{mediatip_type:h("#mediatip_type").val()}),a.mediatip_type){case"localimage":a=h.extend(a,{mediatip_content:h("#image-box-data").val(),mediatip_caption:h("#mediatip_caption").val()});break;case"webimage":a=h.extend(a,{mediatip_content:h("#mediatip_url_image").val(),mediatip_caption:h("#mediatip_caption").val()});break;case"webvideo":a=h.extend(a,{mediatip_content:h("#mediatip_url_video_embed").val(),mediatip_link:h("#mediatip_url_video_link").val()})}}c(a)}),h(".ithoughts_tt_gl-tinymce-discard").click(c.bind(null,null))}():"LIST"===a&&function(){b(h(".tabs li")),function(){var a=h("#groups"),b=h("#groups_text"),c=h(".groupspicker"),d=h([c.get(0),b.parent().get(0)]),e=h(".groupspicker .group-select input");b.focusin(function(){function a(a){a.stopImmediatePropagation()}function b(){c.toggleClass("hidden"),d.off("click",a)}c.toggleClass("hidden"),d.click(a),j.one("click",b)}),e.change(function(){var c=e.filter(":checked"),d=[],f=[];c.each(function(){d.push(h(this).parent().find(".group-title").text()),f.push(h(this).val())}),a.val(f.join(",")),b.val(d.join(", "))}).change()}(),h("#ithoughts_tt_gl-tinymce-validate").click(function(){var a={type:["atoz","list"][h(".tabs li.active").index()],alpha:h("#letters").val(),group:h("#groups").val(),desc:h("#description_mode").val()};switch(a.alpha||delete a.alpha,a.group||delete a.group,a.type){case"list":h.extend(a,{cols:h("#columns_count").val()})}g.finishListTinymce(a)}),h(".ithoughts_tt_gl-tinymce-discard").click(function(){g.finishListTinymce()})}()})},{"./tinymce-filters":4,"./tinymce-utils":5,"regenerator-runtime/runtime":6}],4:[function(a,b,c){var d=a("../optarray"),e=(a("./tinymce-utils"),a("../comon")),f=/(data-)?([\w\d\-]+?)="(.+?)"/g,g=function(a,b){var c=void 0,d=h(a);do{(c=f.exec(b))&&d(c)}while(c)},h=function(a){return function(b){var c=e.maybePrefixAttribute(b[1]+b[2]),d=b[3];"data-type"!==c&&a.addOpt(c,d)}};b.exports={replace:{tip:function(a){return a.replace(/\[itg-(gloss|tooltip|mediatip)(?!_)(.*?)\](.*?)\[\/itg-\1\]/g,function(a,b,c,e){var f=new d;return f.addOpt("data-type","ithoughts-tooltip-glossary-"+b),g(f,c),"<a "+f.toString()+">"+e+"</a>"})},list:function(a){return a.replace(/\[itg-(glossary|atoz)(?:\s+(.*?))\/\]/g,function(a,b,c){var e=new d;return e.addOpt("data-type","ithoughts-tooltip-glossary-"+b),g(e,c),"<span "+e.toString()+">"+("glossary"===b?"Glossary":"A-to-Z")+"</span>"})}},restore:{tip:function(a){return a.replace(/<a\s+(?=[^>]*data-type="ithoughts-tooltip-glossary-(gloss|tooltip|mediatip)")(.*?)>(.*?)<\/a>/g,function(a,b,c,e){var f=new d,h="itg-"+b;return g(f,c),"["+h+" "+f.toString()+"]"+e+"[/"+h+"]"})},list:function(a){return a.replace(/<span\s+(?=[^>]*data-type="ithoughts-tooltip-glossary-(glossary|atoz)")(.*?)>.*?<\/span>/g,function(a,b,c){var e=new d,f="itg-"+b;return g(e,c),"["+f+" "+e.toString()+"/]"})}}}},{"../comon":1,"../optarray":2,"./tinymce-utils":5}],5:[function(a,b,c){var d=a("remove-accents"),e=a("../optarray"),f=a("../comon"),g=iThoughts.v5,h=iThoughtsTooltipGlossary,i=iThoughtsTooltipGlossaryEditor,k=g.isNA,l=function(a){var b=i.editor;h.error("Error while getting editor form for Tip or List: ",a);var c=a.statusText,d="Error getting editor form";if(403===a.status){var e="ithoughts_tt_gl_tinymce.error.forbidden";c="<p>"+b.getLang(e+".content_1")+'<br/><a href="javascript:window.location.href=window.location.href">'+b.getLang(e+".content_2")+"</a></p>",d=b.getLang(e+".title")}h.growl(d,c,!1)},m=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/[,\.\s]+/;return(a||"").split(b).map(Function.prototype.call,String.prototype.trim).filter(function(a){return a})},n=function(a){return"true"===a||"false"!==a&&null},o=["itg-term","itg-tooltip","itg-mediatip"],p=o.map(function(a){return'[data-type="'+a+'"]'}).join(","),q=function(a){if(k(a)){var b=$("#content").get(0),c={html:i.replaceShortcodes(b.value.substring(b.selectionStart,b.selectionEnd))};return c.DOM=$.parseHTML(c.html),$.extend(!0,c,{start:$(c.DOM).first().get(0),end:$(c.DOM).last().get(0)}),c}var d=a.selection;return{DOM:$(d.getNode()).closest(p).toArray(),html:d.getContent({format:"html"}),start:d.getStart(),end:d.getEnd()}},r=function(a){var b=$($.parseHTML(a,!0));return $(document.body).append(b.css({opacity:1}).animate({opacity:1},500)),b},s=function(a){a.animate({opacity:0},500,function(){a.remove()})},t={list:function(){function a(a){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function a(b){var c,d,g,j,n,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return h.info("Selection infos to load LIST: ",b),c="insert_content",d=b.start,g={type:"atoz",alpha:[],group:[]},k(b.start)||b.start!==b.end||(h.info("Start & End node are the same, operating on a node of type "+d.nodeName),d&&"#text"!==d.nodeName&&(j=generateTakeAttr(d),n=j("data-type"),$.extend(g,{alphas:m(j("data-alphas")),groups:m(j("data-groups")),"list-contenttype":j("data-list-contenttype")}),"ithoughts-tooltip-glossary-atoz"===n?(c="load",g.type="atoz"):"ithoughts-tooltip-glossary-term_list"===n&&(c="load",g.type="list",$.extend(g,{cols:parseInt(j("data-cols"))})))),a.prev=5,a.t0=r,a.next=9,f.sendAjaxQuery("get_tinymce_list_form",g,i.nonce);case 9:return a.t1=a.sent,o=(0,a.t0)(a.t1),a.abrupt("return",new Promise(function(a){i.finishListTinymce=function(b){if(s(o),!k(b)){var d="glossary_"+{atoz:"atoz",list:"term_list"}[b.type],f="load"!==c?" ":"",g=new e,i=["alpha","group"];"list"===b.type&&i.push("cols","desc"),i.forEach(function(a){b.hasOwnProperty(a)&&g.addOpt(a,b[a])});var j="["+d+" "+g.toString()+"/]"+f;return h.log("Final content:",j),a({finalContent:j,mode:c})}}}));case 14:a.prev=14,a.t2=a.catch(5),l(a.t2);case 17:case"end":return a.stop()}},a,this,[[5,14]])}));return a}(),tip:function(){function a(a,c){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function a(b,c){var d,g,p,q,t,v,w,x,y,z,A;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return h.info("Selection infos to load TIP: ",b),d=b.start,g={},p="",k(b.start)||b.start!==b.end||(h.info("Start & End node are the same, operating on a node of type "+d.nodeName),q=d&&d.text||b.html,h.log("Loading content: ",q),d&&"#text"!==d.nodeName&&o.indexOf(d.getAttribute("data-type"))>-1?(p="load",t=v(d),v=generateTakeAttr(t),w=m(v("position-at")||" "),x=m(v("position-my")||" "),y=1===Math.max(x.indexOf("top"),x.indexOf("bottom"))||0===Math.max(x.indexOf("right"),x.indexOf("left")),w={1:w[0],2:w[1]},x={1:x[y?1:0],2:x[y?0:1],invert:y?"enabled":void 0},z=v("tooltip-content"),c&&z&&(z=z.replace(/&lt;/g,"<").replace(/&gt;/g,">")),g={text:q,link:v("href",!0),tooltip_content:h.replaceQuotes(z||q,!1),glossary_id:v("glossary-id"),term_search:i.removeAccents(q.toLowerCase()),mediatip_type:v("mediatip-type"),mediatip_content:h.replaceQuotes(v("mediatip-content"),!1),mediatip_link:v("mediatip-link"),mediatip_caption:v("mediatip-caption"),type:["glossary","tooltip","mediatip"][o.indexOf(v("type"))],opts:{contenttype:v("gloss-contenttype"),"qtip-keep-open":"true"===v("qtip-keep-open"),qtiprounded:n(v("qtiprounded")),qtipshadow:n(v("qtipshadow")),qtipstyle:v("qtipstyle"),qtiptrigger:v("qtiptrigger"),position:{at:w,my:x},anim:{in:v("animation_in"),out:v("animation_out"),time:v("animation_time")},maxwidth:v("tooltip-maxwidth")},glossary_disable_auto_translation:"true"===(v("disable_auto_translation")||!1)},g.opts.attributes=t):(g={text:"",link:"","tooltip-content":"","gloss-id":null,"gloss-search":"",mediatip_type:"",mediatip_content:"",mediatip_caption:"",type:"tooltip",glossary_disable_auto_translation:!1},q&&q.length>0?(p="replace_content",g=$.extend(g,{text:q,"tooltip-content":q,"gloss-search":u.removeAccents(q.toLowerCase())})):p="add_content")),a.prev=5,a.t0=r,a.next=9,f.sendAjaxQuery("get_tinymce_tooltip_form",g,i.nonce);case 9:return a.t1=a.sent,A=(0,a.t0)(a.t1),a.abrupt("return",new Promise(function(a){i.finishTipTinymce=function(b){if(s(A),i.info("New tooltip data:",b),!k(b)){var d=new e,f=A.find("#attributes-list option").map(function(a){return a.value}).toArray(),l=["span","link"],m="itg-"+b.type,n="load"!==p&&0===content.length?" ":"",o=b.opts||g.opts,q=o&&o.attributes||{};if(!k(o)){if(d.maybeAddOpt(o["gloss-contenttype"],"data-gloss-contenttype",o["gloss-contenttype"]),d.maybeAddOpt(o["qtip-keep-open"],"data-qtip-keep-open","true"),d.maybeAddOpt(!k(o.qtiprounded),"data-qtiprounded",String(o.qtiprounded)),d.maybeAddOpt(!k(o.qtipshadow),"data-qtipshadow",String(o.qtipshadow)),d.maybeAddOpt(o.qtipstyle,"data-qtipstyle",o.qtipstyle),d.maybeAddOpt(o.qtiptrigger,"data-qtiptrigger",o.qtiptrigger),o.position&&(o.position.at&&o.position.at[1]&&o.position.at[2]&&d.addOpt("data-position-at",o.position.at[1]+" "+o.position.at[2]),o.position.my&&o.position.my[1]&&o.position.my[2])){var r=[o.position.my[1],o.position.my[2]];o.position.my.invert&&r.reverse(),d.addOpt("data-position-my",r.join(" "))}o.anim&&(d.maybeAddOpt(o.anim.in,"data-animation_in",o.anim.in),d.maybeAddOpt(o.anim.out,"data-animation_out",o.anim.out),d.maybeAddOpt(o.anim.time,"data-animation_time",o.anim.time)),d.maybeAddOpt(o.maxwidth,"data-tooltip-maxwidth",o.maxwidth),l.forEach(function(a){if(q.hasOwnProperty(a))for(j in q[a])if(q[a].hasOwnProperty(j)){var b=f.indexOf(j)>-1&&!j.startsWith("data-")?"":"data-",c="link"===a?"link-":"";d.addOpt(b+c+j,q[a][j],!0)}})}if(d.maybeAddOpt(o.link,"href",encodeURI(b.link)),"glossary"===b.type){if(!b.glossary_id||!b.text)return;d.addOpt("glossary-id",b.glossary_id),b.disable_auto_translation&&d.addOpt("disable_auto_translation","true")}else if("tooltip"===b.type){if(!b.tooltip_content||!b.text)return;addOpt("tooltip-content",c?b.tooltip_content.replace(/</g,"&lt;").replace(/>/g,"&gt;"):b.tooltip_content,!0)}else if("mediatip"===b.type){if(!(b.mediatip_type&&b.mediatip_content&&b.text))return;addOpt("mediatip-type",b.mediatip_type),addOpt("mediatip-content",b.mediatip_content,!0),b.mediatip_caption&&addOpt("mediatip-caption",b.mediatip_caption,!0)}var t="["+m+" "+d.toString()+"]"+b.text+"[/"+m+"]"+n;return h.log("Final content:",t),a({finalContent:t,mode:p})}}}));case 14:a.prev=14,a.t2=a.catch(5),l(a.t2);case 17:case"end":return a.stop()}},a,this,[[5,14]])}));return a}()},u={editorForms:t,generateSelObject:q,hideOutForm:s,tipsTypes:o,tipsSelector:p,removeAccents:d};b.exports=u},{"../comon":1,"../optarray":2,"remove-accents":7}],6:[function(a,b,c){(function(a){!function(a){function c(a,b,c,d){var f=b&&b.prototype instanceof e?b:e,g=Object.create(f.prototype),h=new n(d||[]);return g._invoke=j(a,c,h),g}function d(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}function e(){}function f(){}function g(){}function h(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}function i(b){function c(a,e,f,g){var h=d(b[a],b,e);if("throw"!==h.type){var i=h.arg,j=i.value;return j&&"object"===(void 0===j?"undefined":_typeof(j))&&s.call(j,"__await")?Promise.resolve(j.__await).then(function(a){c("next",a,f,g)},function(a){c("throw",a,f,g)}):Promise.resolve(j).then(function(a){i.value=a,f(i)},g)}g(h.arg)}function e(a,b){function d(){return new Promise(function(d,e){c(a,b,d,e)})}return f=f?f.then(d,d):d()}"object"===_typeof(a.process)&&a.process.domain&&(c=a.process.domain.bind(c));var f;this._invoke=e}function j(a,b,c){var e=z;return function(f,g){if(e===B)throw new Error("Generator is already running");if(e===C){if("throw"===f)throw g;return p()}for(c.method=f,c.arg=g;;){var h=c.delegate;if(h){var i=k(h,c);if(i){if(i===D)continue;return i}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(e===z)throw e=C,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);e=B;var j=d(a,b,c);if("normal"===j.type){if(e=c.done?C:A,j.arg===D)continue;return{value:j.arg,done:c.done}}"throw"===j.type&&(e=C,c.method="throw",c.arg=j.arg)}}}function k(a,b){var c=a.iterator[b.method];if(c===q){if(b.delegate=null,"throw"===b.method){if(a.iterator.return&&(b.method="return",b.arg=q,k(a,b),"throw"===b.method))return D;b.method="throw",b.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}var e=d(c,a.iterator,b.arg);if("throw"===e.type)return b.method="throw",b.arg=e.arg,b.delegate=null,D;var f=e.arg;return f?f.done?(b[a.resultName]=f.value,b.next=a.nextLoc,"return"!==b.method&&(b.method="next",b.arg=q),b.delegate=null,D):f:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,D)}function l(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function m(a){var b=a.completion||{};b.type="normal",delete b.arg,a.completion=b}function n(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(l,this),this.reset(!0)}function o(a){if(a){var b=a[u];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var c=-1,d=function b(){for(;++c<a.length;)if(s.call(a,c))return b.value=a[c],b.done=!1,b;return b.value=q,b.done=!0,b};return d.next=d}}return{next:p}}function p(){return{value:q,done:!0}}var q,r=Object.prototype,s=r.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},u=t.iterator||"@@iterator",v=t.asyncIterator||"@@asyncIterator",w=t.toStringTag||"@@toStringTag",x="object"===(void 0===b?"undefined":_typeof(b)),y=a.regeneratorRuntime;if(y)return void(x&&(b.exports=y));y=a.regeneratorRuntime=x?b.exports:{},y.wrap=c;var z="suspendedStart",A="suspendedYield",B="executing",C="completed",D={},E={};E[u]=function(){return this};var F=Object.getPrototypeOf,G=F&&F(F(o([])));G&&G!==r&&s.call(G,u)&&(E=G);var H=g.prototype=e.prototype=Object.create(E);f.prototype=H.constructor=g,g.constructor=f,g[w]=f.displayName="GeneratorFunction",y.isGeneratorFunction=function(a){var b="function"==typeof a&&a.constructor;return!!b&&(b===f||"GeneratorFunction"===(b.displayName||b.name))},y.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,g):(a.__proto__=g,w in a||(a[w]="GeneratorFunction")),a.prototype=Object.create(H),a},y.awrap=function(a){return{__await:a}},h(i.prototype),i.prototype[v]=function(){return this},y.AsyncIterator=i,y.async=function(a,b,d,e){var f=new i(c(a,b,d,e));return y.isGeneratorFunction(b)?f:f.next().then(function(a){return a.done?a.value:f.next()})},h(H),H[w]="Generator",H[u]=function(){return this},H.toString=function(){return"[object Generator]"},y.keys=function(a){var b=[];for(var c in a)b.push(c);return b.reverse(),function c(){for(;b.length;){var d=b.pop();if(d in a)return c.value=d,c.done=!1,c}return c.done=!0,c}},y.values=o,n.prototype={constructor:n,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=q,this.done=!1,this.delegate=null,this.method="next",this.arg=q,this.tryEntries.forEach(m),!a)for(var b in this)"t"===b.charAt(0)&&s.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=q)},stop:function(){this.done=!0;var a=this.tryEntries[0],b=a.completion;if("throw"===b.type)throw b.arg;return this.rval},dispatchException:function(a){function b(b,d){return f.type="throw",f.arg=a,c.next=b,d&&(c.method="next",c.arg=q),!!d}if(this.done)throw a;for(var c=this,d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if("root"===e.tryLoc)return b("end");if(e.tryLoc<=this.prev){var g=s.call(e,"catchLoc"),h=s.call(e,"finallyLoc");if(g&&h){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else if(g){if(this.prev<e.catchLoc)return b(e.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return b(e.finallyLoc)}}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&s.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&("break"===a||"continue"===a)&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);var f=e?e.completion:{};return f.type=a,f.arg=b,e?(this.method="next",this.next=e.finallyLoc,D):this.complete(f)},complete:function(a,b){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b),D},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),m(c),D}},catch:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if("throw"===d.type){var e=d.arg;m(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){return this.delegate={iterator:o(a),resultName:b,nextLoc:c},"next"===this.method&&(this.arg=q),D}}}("object"===(void 0===a?"undefined":_typeof(a))?a:"object"===("undefined"==typeof window?"undefined":_typeof(window))?window:"object"===("undefined"==typeof self?"undefined":_typeof(self))?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(a,b,c){var d={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ấ":"A","Ắ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Æ":"AE","Ầ":"A","Ằ":"A","Ȃ":"A","Ç":"C","Ḉ":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ế":"E","Ḗ":"E","Ề":"E","Ḕ":"E","Ḝ":"E","Ȇ":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ḯ":"I","Ȋ":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ố":"O","Ṍ":"O","Ṓ":"O","Ȏ":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ấ":"a","ắ":"a","ẳ":"a","ẵ":"a","ặ":"a","æ":"ae","ầ":"a","ằ":"a","ȃ":"a","ç":"c","ḉ":"c","è":"e","é":"e","ê":"e","ë":"e","ế":"e","ḗ":"e","ề":"e","ḕ":"e","ḝ":"e","ȇ":"e","ì":"i","í":"i","î":"i","ï":"i","ḯ":"i","ȋ":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ố":"o","ṍ":"o","ṓ":"o","ȏ":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","C̆":"C","c̆":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","Ǵ":"G","ĝ":"g","ǵ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ḫ":"H","ḫ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","Ḱ":"K","ḱ":"k","K̆":"K","k̆":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"l","ł":"l","Ḿ":"M","ḿ":"m","M̆":"M","m̆":"m","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"n","N̆":"N","n̆":"n","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","P̆":"P","p̆":"p","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R",
"ř":"r","R̆":"R","r̆":"r","Ȓ":"R","ȓ":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","Ș":"S","ș":"s","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","ț":"t","Ț":"T","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","T̆":"T","t̆":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ȗ":"U","ȗ":"u","V̆":"V","v̆":"v","Ŵ":"W","ŵ":"w","Ẃ":"W","ẃ":"w","X̆":"X","x̆":"x","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Y̆":"Y","y̆":"y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ſ":"s","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","Ǎ":"A","ǎ":"a","Ǐ":"I","ǐ":"i","Ǒ":"O","ǒ":"o","Ǔ":"U","ǔ":"u","Ǖ":"U","ǖ":"u","Ǘ":"U","ǘ":"u","Ǚ":"U","ǚ":"u","Ǜ":"U","ǜ":"u","Ứ":"U","ứ":"u","Ṹ":"U","ṹ":"u","Ǻ":"A","ǻ":"a","Ǽ":"AE","ǽ":"ae","Ǿ":"O","ǿ":"o","Þ":"TH","þ":"th","Ṕ":"P","ṕ":"p","Ṥ":"S","ṥ":"s","X́":"X","x́":"x","Ѓ":"Г","ѓ":"г","Ќ":"К","ќ":"к","A̋":"A","a̋":"a","E̋":"E","e̋":"e","I̋":"I","i̋":"i","Ǹ":"N","ǹ":"n","Ồ":"O","ồ":"o","Ṑ":"O","ṑ":"o","Ừ":"U","ừ":"u","Ẁ":"W","ẁ":"w","Ỳ":"Y","ỳ":"y","Ȁ":"A","ȁ":"a","Ȅ":"E","ȅ":"e","Ȉ":"I","ȉ":"i","Ȍ":"O","ȍ":"o","Ȑ":"R","ȑ":"r","Ȕ":"U","ȕ":"u","B̌":"B","b̌":"b","Č̣":"C","č̣":"c","Ê̌":"E","ê̌":"e","F̌":"F","f̌":"f","Ǧ":"G","ǧ":"g","Ȟ":"H","ȟ":"h","J̌":"J","ǰ":"j","Ǩ":"K","ǩ":"k","M̌":"M","m̌":"m","P̌":"P","p̌":"p","Q̌":"Q","q̌":"q","Ř̩":"R","ř̩":"r","Ṧ":"S","ṧ":"s","V̌":"V","v̌":"v","W̌":"W","w̌":"w","X̌":"X","x̌":"x","Y̌":"Y","y̌":"y","A̧":"A","a̧":"a","B̧":"B","b̧":"b","Ḑ":"D","ḑ":"d","Ȩ":"E","ȩ":"e","Ɛ̧":"E","ɛ̧":"e","Ḩ":"H","ḩ":"h","I̧":"I","i̧":"i","Ɨ̧":"I","ɨ̧":"i","M̧":"M","m̧":"m","O̧":"O","o̧":"o","Q̧":"Q","q̧":"q","U̧":"U","u̧":"u","X̧":"X","x̧":"x","Z̧":"Z","z̧":"z"},e=Object.keys(d).join("|"),f=new RegExp(e,"g"),g=new RegExp(e,""),h=function(a){return a.replace(f,function(a){return d[a]})},i=function(a){return!!a.match(g)};b.exports=h,b.exports.has=i,b.exports.remove=h},{}]},{},[3]);
//# sourceMappingURL=form-handler.min.js.map/**/