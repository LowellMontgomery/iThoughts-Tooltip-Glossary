{"version":3,"sources":["../assets/build/js/tinymce/tinymce-utils-bundled.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","module","initTinyMCEPlugin","ithoughts","$d","ready","onDocumentReady","$","itg","iThoughtsTooltipGlossary","itge","iThoughtsTooltipGlossaryEditor","stripQuotes","prefix3","prefix4","tipsTypes","htmlAttrs","isNA","initLoggers","verbosity","removeAccents","translateRegex","translate","A","c","C","E","g","G","I","L","N","O","R","S","U","z","Z","replace","doReplace","match","replaceShortcodes","content","repLength","replaceShortcodesEl","restoreShortcodes","resLength","restoreShortcodesEl","replaceShortcodeElGlossary","all","balise","inner","text","attrs","regex","matched","ret","glossary","tooltip","mediatip","Boolean","exec","hasOwnProperty","indexOf","replaceShortcodeElList","type","attrStr","restoreShortcodeElGlossary","b","term","restoreShortcodeElList","editorForms","list","selection","callback","log","mode","node","start","values","alpha","group","loader","trimFilter","attrsStr","split","map","Function","prototype","String","trim","filter","filterNonNullAttr","end","nodeName","extend","getAttribute","cols","parseInt","desc","makeLoader","ajax","method","async","url","admin_ajax","data","action","success","out","remove","newDom","parseHTML","document","body","append","css","opacity","animate","finishListTinymce","domC","handleFormSubmitted","info","animateEnd","shortcode","atoz","tail","optsStrs","addOpt","label","value","specEncode","push","generateAttr","filterNoNA","val","concat","attr","finalContent","join","error","arguments","tip","escapeContent","atts","attsLength","att","takeAttr","positionAt","positionMy","myInverted","tristate","html","attributes","nodeValue","nodata","Math","max","invert","undefined","tooltipContent","link","tooltip_content","glossary_id","term_search","toLowerCase","mediatip_type","mediatip_content","mediatip_link","mediatip_caption","opts","termcontent","qtiprounded","qtipshadow","qtipstyle","qtiptrigger","position","at","my","span","anim","in","time","maxwidth","glossary_disable_auto_translation","_wpnonce","nonce","finishTipTinymce","animateAfter","attributesList","find","domToValue","toArray","types","typesLength","j","prefix","midPart","optsAttrs","reverse","startsWith","encodeURI","disable_auto_translation","generateSelObject","txtarea","get","sel","substring","selectionStart","selectionEnd","DOM","first","last","QTags","addButton","onClickButton","insertContent","iThoughts","v5"],"mappings":";;;;;;;;;;;;;;;AAAA,EAAC,SAASA,CAAT,CAAWC,CAAX,EAAaC,CAAb,EAAeC,CAAf,EAAiB;AAAC,WAASC,CAAT,CAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,OAAG,CAACJ,EAAEG,CAAF,CAAJ,EAAS;AAAC,QAAG,CAACJ,EAAEI,CAAF,CAAJ,EAAS;AAAC,SAAIE,IAAE,OAAOC,OAAP,IAAgB,UAAhB,IAA4BA,OAAlC,CAA0C,IAAG,CAACF,CAAD,IAAIC,CAAP,EAAS,OAAOA,EAAEF,CAAF,EAAI,CAAC,CAAL,CAAP,CAAe,IAAGI,CAAH,EAAK,OAAOA,EAAEJ,CAAF,EAAI,CAAC,CAAL,CAAP,CAAe,IAAIK,IAAE,IAAIC,KAAJ,CAAU,yBAAuBN,CAAvB,GAAyB,GAAnC,CAAN,CAA8C,MAAMK,EAAEE,IAAF,GAAO,kBAAP,EAA0BF,CAAhC;AAAkC,SAAIG,IAAEX,EAAEG,CAAF,IAAK,EAACS,SAAQ,EAAT,EAAX,CAAwBb,EAAEI,CAAF,EAAK,CAAL,EAAQU,IAAR,CAAaF,EAAEC,OAAf,EAAuB,UAASd,CAAT,EAAW;AAAC,SAAIE,IAAED,EAAEI,CAAF,EAAK,CAAL,EAAQL,CAAR,CAAN,CAAiB,OAAOI,EAAEF,IAAEA,CAAF,GAAIF,CAAN,CAAP;AAAgB,KAApE,EAAqEa,CAArE,EAAuEA,EAAEC,OAAzE,EAAiFd,CAAjF,EAAmFC,CAAnF,EAAqFC,CAArF,EAAuFC,CAAvF;AAA0F,WAAOD,EAAEG,CAAF,EAAKS,OAAZ;AAAoB,OAAIL,IAAE,OAAOD,OAAP,IAAgB,UAAhB,IAA4BA,OAAlC,CAA0C,KAAI,IAAIH,IAAE,CAAV,EAAYA,IAAEF,EAAEa,MAAhB,EAAuBX,GAAvB;AAA2BD,KAAED,EAAEE,CAAF,CAAF;AAA3B,GAAmC,OAAOD,CAAP;AAAS,EAAzb,EAA2b,EAAC,GAAE,CAAC,UAASI,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC/d;;;;;;;;;;;AAWA;;AAEA;;AAEA;;;;;;AAKA,IAAE,SAASI,iBAAT,CAA4BC,SAA5B,EAAwC;AACzCA,cAAUC,EAAV,CAAaC,KAAb,CAAoB,SAASC,eAAT,GAA2B;AAC9C,SAAIC,IAAUJ,UAAUI,CAAxB;AAAA,SACCC,MAASC,wBADV;AAAA,SAECC,OAASC,8BAFV;AAAA,SAGCC,cAAeJ,IAAII,WAHpB;AAAA,SAICC,UAAY,4BAJb;AAAA,SAKCC,UAAY,KALb;AAAA,SAMCC,YAAa,CAAE,iCAAF,EAAqC,oCAArC,EAA2E,qCAA3E,CANd;AAAA,SAOCC,YAAa,CAAE,MAAF,CAPd;AAAA,SAQCC,OAASd,UAAUc,IARpB;;AAUAd,eAAUe,WAAV,CAAuBR,IAAvB,EAA6B,4BAA7B,EAA2DA,KAAKS,SAAhE;AACAT,UAAKU,aAAL,GAAqB,SAASA,aAAT,CAAwBhC,CAAxB,EAA4B;AAChD,UAAIiC,iBAAiB,2IAArB;AAAA,UACCC,YAAa;AACZ,YAAK,GADO;AAEZ,YAAK,GAFO;AAGZ,YAAK,GAHO;AAIZ,YAAK,GAJO;AAKZ,YAAK,GALO;AAMZ,YAAK,GANO;AAOZ,YAAK,GAPO;AAQZ,YAAK,GARO;AASZ,YAAK,GATO;AAUZ/B,UAAK,GAVO;AAWZ,YAAK,GAXO;AAYZ,YAAK,GAZO;AAaZ,YAAK,GAbO;AAcZ,YAAK,GAdO;AAeZ,YAAK,GAfO;AAgBZ,YAAK,GAhBO;AAiBZgC,UAAK,GAjBO;AAkBZ,YAAK,GAlBO;AAmBZC,UAAK,GAnBO;AAoBZ,YAAK,GApBO;AAqBZ,YAAK,GArBO;AAsBZC,UAAK,GAtBO;AAuBZ,YAAK,GAvBO;AAwBZ,YAAK,GAxBO;AAyBZ,YAAK,GAzBO;AA0BZ,YAAK,GA1BO;AA2BZ,YAAK,GA3BO;AA4BZ,YAAK,GA5BO;AA6BZ,YAAK,GA7BO;AA8BZzC,UAAK,GA9BO;AA+BZ,YAAK,GA/BO;AAgCZ,YAAK,GAhCO;AAiCZ,YAAK,GAjCO;AAkCZ0C,UAAK,GAlCO;AAmCZ,YAAK,GAnCO;AAoCZC,UAAK,GApCO;AAqCZC,UAAK,GArCO;AAsCZnC,UAAK,GAtCO;AAuCZ,YAAK,GAvCO;AAwCZ,YAAK,GAxCO;AAyCZ,YAAK,GAzCO;AA0CZ,YAAK,GA1CO;AA2CZ,YAAK,GA3CO;AA4CZ,YAAK,GA5CO;AA6CZ,YAAK,GA7CO;AA8CZ,YAAK,GA9CO;AA+CZoC,UAAK,GA/CO;AAgDZhC,UAAK,GAhDO;AAiDZiC,UAAK,GAjDO;AAkDZ5C,UAAK,GAlDO;AAmDZ,YAAK,GAnDO;AAoDZ6C,UAAK,GApDO;AAqDZ,YAAK,GArDO;AAsDZ,YAAK,GAtDO;AAuDZ,YAAK,GAvDO;AAwDZ,YAAK,GAxDO;AAyDZ,YAAK,GAzDO;AA0DZ,YAAK,GA1DO;AA2DZ1C,UAAK,GA3DO;AA4DZ,YAAK,GA5DO;AA6DZ,YAAK,GA7DO;AA8DZ,YAAK,GA9DO;AA+DZ,YAAK,GA/DO;AAgEZ,YAAK,GAhEO;AAiEZ,YAAK,GAjEO;AAkEZ2C,UAAK,GAlEO;AAmEZ,YAAK,GAnEO;AAoEZ,YAAK,GApEO;AAqEZ7C,UAAK,GArEO;AAsEZ,YAAK,GAtEO;AAuEZ8C,UAAK,GAvEO;AAwEZ,YAAK,GAxEO;AAyEZ7C,UAAK,GAzEO;AA0EZ,YAAK,GA1EO;AA2EZ,YAAK,GA3EO;AA4EZ8C,UAAK,GA5EO;AA6EZ,YAAK,GA7EO;AA8EZ,YAAK,GA9EO;AA+EZ,YAAK,GA/EO;AAgFZ,YAAK,GAhFO;AAiFZ5C,UAAK,GAjFO;AAkFZ,YAAK,GAlFO;AAmFZ,YAAK,GAnFO;AAoFZ,YAAK,GApFO;AAqFZ,YAAK,GArFO;AAsFZ6C,UAAK,GAtFO;AAuFZ,YAAK,GAvFO;AAwFZ,YAAK,GAxFO;AAyFZ,YAAK,GAzFO;AA0FZ,YAAK,GA1FO;AA2FZ,YAAK,GA3FO;AA4FZC,UAAK,GA5FO;AA6FZ,YAAK,GA7FO;AA8FZC,UAAK;AA9FO,OADd;AAiGA,aAAOjD,EAAEkD,OAAF,CAAWjB,cAAX,EAA2B,SAASkB,SAAT,CAAoBC,KAApB,EAA4B;AAC7D,cAAOlB,UAAUkB,KAAV,CAAP;AACA,OAFM,CAAP;AAGA,MArGD;;AAuGA9B,UAAK+B,iBAAL,GAAyB,SAASA,iBAAT,CAA4BC,OAA5B,EAAsC;AAC9D,UAAIC,YAAYjC,KAAKkC,mBAAL,CAAyB5C,MAAzC;AAAA,UACCP,IAAI,CAAC,CADN;AAEA,aAAO,CAAEA,KAAK,CAAP,IAAakD,SAApB,EAAgC;AAC/BD,iBAAUhC,KAAKkC,mBAAL,CAAyBnD,CAAzB,EAA6BiD,OAA7B,CAAV;AACA;AACD,aAAOA,OAAP;AACA,MAPD;AAQAhC,UAAKmC,iBAAL,GAAyB,SAASA,iBAAT,CAA4BH,OAA5B,EAAsC;AAC9D,UAAII,YAAYpC,KAAKqC,mBAAL,CAAyB/C,MAAzC;AAAA,UACCP,IAAI,CAAC,CADN;AAEA,aAAO,CAAEA,KAAK,CAAP,IAAaqD,SAApB,EAAgC;AAC/BJ,iBAAUhC,KAAKqC,mBAAL,CAAyBtD,CAAzB,EAA6BiD,OAA7B,CAAV;AACA;AACD,aAAOA,OAAP;AACA,MAPD;AAQAhC,UAAKkC,mBAAL,GAA2B,CAC1B,SAASI,0BAAT,CAAqCN,OAArC,EAA+C;AAAE;AAChD,aAAOA,QAAQJ,OAAR,CAAiB,oGAAjB,EAAuH,SAASC,SAAT,CAAoBU,GAApB,EAAyBC,MAAzB,EAAiCC,KAAjC,EAAwCC,IAAxC,EAA+C;AAC5K,WAAIC,QAAQ,EAAZ;AAAA,WACCC,QAAQ,uBADT;AAAA,WAECC,UAAU,IAFX;AAAA,WAGCC,0BAA0B3C,OAA1B,SAAyC;AACxC4C,kBAAU,MAD8B;AAExCC,iBAAU,SAF8B;AAGxCC,kBAAU;AAH8B,SAIvCT,MAJuC,CAAzC,OAHD;AAAA,WAQCzD,CARD;AASA,cAAQ,SAASmE,QAASL,UAAUD,MAAMO,IAAN,CAAYV,KAAZ,CAAnB,CAAjB,EAA0D;AACzDE,cAAME,QAAQ,CAAR,CAAN,IAAoBA,QAAQ,CAAR,CAApB;AACA;AACD,YAAM9D,CAAN,IAAW4D,KAAX,EAAmB;AAClB,YAAKA,MAAMS,cAAN,CAAsBrE,CAAtB,CAAL,EAAgC;AAC/B,aAAKuB,UAAU+C,OAAV,CAAmBtE,CAAnB,IAAyB,CAAC,CAA1B,IAA+B,MAAMA,EAAEsE,OAAF,CAAW,OAAX,CAA1C,EAAgE;AAC/DP,uBAAa/D,CAAb,WAAuB4D,MAAM5D,CAAN,CAAvB;AACA,UAFD,MAEO;AACN+D,4BAAkB/D,CAAlB,WAA4B4D,MAAM5D,CAAN,CAA5B;AACA;AACD;AACD;AACD,cAAW+D,GAAX,SAAsBJ,IAAtB;AACA,OAvBM,CAAP;AAwBA,MA1ByB,EA2B1B,SAASY,sBAAT,CAAiCtB,OAAjC,EAA2C;AAAE;AAC5C,aAAOA,QAAQJ,OAAR,CAAiB,uCAAjB,EAA0D,SAASC,SAAT,CAAoBU,GAApB,EAAyBgB,IAAzB,EAA+BC,OAA/B,EAAyC;AACzG,WAAIb,QAAQ,EAAZ;AAAA,WACCC,QAAQ,uBADT;AAAA,WAECC,UAAU,IAFX;AAAA,WAGCC,6BAA6B3C,OAA7B,SAA4CoD,IAA5C,OAHD;AAAA,WAICxE,CAJD;AAKA,cAAQ,SAASmE,QAASL,UAAUD,MAAMO,IAAN,CAAYK,OAAZ,CAAnB,CAAjB,EAA4D;AAC3Db,cAAME,QAAQ,CAAR,CAAN,IAAoBA,QAAQ,CAAR,CAApB;AACA;AACD,YAAM9D,CAAN,IAAW4D,KAAX,EAAmB;AAClB,YAAKA,MAAMS,cAAN,CAAsBrE,CAAtB,CAAL,EAAgC;AAC/B,aAAKuB,UAAU+C,OAAV,CAAmBtE,CAAnB,IAAyB,CAAC,CAA1B,IAA+B,MAAMA,EAAEsE,OAAF,CAAW,OAAX,CAA1C,EAAgE;AAC/DP,uBAAa/D,CAAb,WAAuB4D,MAAM5D,CAAN,CAAvB;AACA,UAFD,MAEO;AACN+D,4BAAkB/D,CAAlB,WAA4B4D,MAAM5D,CAAN,CAA5B;AACA;AACD;AACD;AACD,cAAW+D,GAAX,mBAAiC,gBAAgBS,IAAlB,GAA2B,MAA3B,GAAoC,QAAnE;AACA,OAnBM,CAAP;AAoBA,MAhDyB,CAA3B;AAkDAvD,UAAKqC,mBAAL,GAA2B,CAC1B,SAASoB,0BAAT,CAAqCzB,OAArC,EAA+C;AAAE;AAChD,aAAOA,QAAQJ,OAAR,CAAiB,+FAAjB,EAAkH,SAASC,SAAT,CAAoBU,GAApB,EAAyBgB,IAAzB,EAA+Bd,KAA/B,EAAsCC,IAAtC,EAA6C;AACrK,WAAIC,QAAQ,EAAZ;AAAA,WACCC,QAAQ,+BADT;AAAA,WAECC,UAAU,IAFX;AAAA,WAGCa,IAAK;AACJC,cAAU,UADN;AAEJX,iBAAU,SAFN;AAGJC,kBAAU;AAHN,SAIHM,IAJG,CAHN;AAAA,WAQCT,YAAa1C,OAAb,SAA4BsD,CAR7B;AAAA,WASC3E,CATD;AAUA,cAAQ,SAASmE,QAASL,UAAUD,MAAMO,IAAN,CAAYV,KAAZ,CAAnB,CAAjB,EAA0D;AACzD,YAAKI,QAAQ,CAAR,MAAe,OAAf,IAA0BA,QAAQ,CAAR,MAAe,MAA9C,EAAuD;AACtD,aAAKvC,UAAU+C,OAAV,CAAmBR,QAAQ,CAAR,CAAnB,IAAiC,CAAC,CAAlC,IAAuC,OAAOA,QAAQ,CAAR,CAAP,KAAsB,WAAlE,EAAgF;AAC/EF,gBAAME,QAAQ,CAAR,IAAaA,QAAQ,CAAR,CAAnB,IAAiCA,QAAQ,CAAR,CAAjC;AACA,UAFD,MAEO;AACNF,gBAAME,QAAQ,CAAR,CAAN,IAAoBA,QAAQ,CAAR,CAApB;AACA;AACD;AACD;AACD,YAAM9D,CAAN,IAAW4D,KAAX,EAAmB;AAClB,YAAKA,MAAMS,cAAN,CAAsBrE,CAAtB,CAAL,EAAgC;AAC/B+D,sBAAa/D,CAAb,WAAuB4D,MAAM5D,CAAN,CAAvB;AACA;AACD;AACD,cAAW+D,GAAX,SAAsBJ,IAAtB,UAAmCtC,OAAnC,SAAkDsD,CAAlD;AACA,OA1BM,CAAP;AA2BA,MA7ByB,EA8B1B,SAASE,sBAAT,CAAiC5B,OAAjC,EAA2C;AAAE;AAC5C,aAAOA,QAAQJ,OAAR,CAAiB,4FAAjB,EAA+G,SAASC,SAAT,CAAoBU,GAApB,EAAyBgB,IAAzB,EAA+BC,OAA/B,EAAyC;AAC9J,WAAIb,QAAQ,EAAZ;AAAA,WACCC,QAAQ,+BADT;AAAA,WAECC,UAAU,IAFX;AAAA,WAGCC,qBAAsBS,IAHvB;AAAA,WAICxE,CAJD;AAKA,cAAQ,SAASmE,QAASL,UAAUD,MAAMO,IAAN,CAAYK,OAAZ,CAAnB,CAAjB,EAA4D;AAC3D,YAAKX,QAAQ,CAAR,MAAe,OAAf,IAA0BA,QAAQ,CAAR,MAAe,MAA9C,EAAuD;AACtD,aAAKvC,UAAU+C,OAAV,CAAmBtE,CAAnB,IAAyB,CAAC,CAA1B,IAA+B,OAAO8D,QAAQ,CAAR,CAAP,KAAsB,WAA1D,EAAwE;AACvEF,gBAAME,QAAQ,CAAR,IAAaA,QAAQ,CAAR,CAAnB,IAAiCA,QAAQ,CAAR,CAAjC;AACA,UAFD,MAEO;AACNF,gBAAME,QAAQ,CAAR,CAAN,IAAoBA,QAAQ,CAAR,CAApB;AACA;AACD;AACD;AACD,YAAM9D,CAAN,IAAW4D,KAAX,EAAmB;AAClB,YAAKA,MAAMS,cAAN,CAAsBrE,CAAtB,CAAL,EAAgC;AAC/B+D,sBAAa/D,CAAb,WAAuB4D,MAAM5D,CAAN,CAAvB;AACA;AACD;AACD,cAAW+D,GAAX;AACA,OArBM,CAAP;AAsBA,MArDyB,CAA3B;;AAwDA9C,UAAK6D,WAAL,GAAmB;AAClBC,YAAM,SAASA,IAAT,CAAeC,SAAf,EAA0BC,QAA1B,EAAqC;AAC1ChE,YAAKiE,GAAL,CAAU,+BAAV,EAA2CF,SAA3C;AACA,WAAIG,OAAO,gBAAX;AAAA,WACCC,OAAOJ,UAAUK,KADlB;AAAA,WAECC,SAAS;AACRd,cAAO,MADC;AAERe,eAAO,EAFC;AAGRC,eAAO;AAHC,QAFV;AAAA,WAOCC,MAPD;AAQA,gBAASC,UAAT,CAAqBC,QAArB,EAAgC;AAC/B,eAAO,CAAEA,YAAU,EAAZ,EAAiBC,KAAjB,CAAwB,GAAxB,EAA8BC,GAA9B,CAAmCC,SAASC,SAAT,CAAmBzF,IAAtD,EAA4D0F,OAAOD,SAAP,CAAiBE,IAA7E,EAAoFC,MAApF,CAA4F,SAASC,iBAAT,CAA4B5G,CAA5B,EAAgC;AAClI,gBAAOA,CAAP;AACA,SAFM,CAAP;AAGA;AACD,WAAK,CAACiC,KAAMwD,UAAUK,KAAhB,CAAD,IAA4BL,UAAUK,KAAV,KAAoBL,UAAUoB,GAA/D,EAAqE;AACpEnF,aAAKiE,GAAL,iEAA0EE,KAAKiB,QAA/E;AACA,YAAKjB,QAAQA,KAAKiB,QAAL,KAAkB,OAA/B,EAAyC;AACxCvF,WAAEwF,MAAF,CAAUhB,MAAV,EAAkB;AACjBC,iBAAOG,WAAYN,KAAKmB,YAAL,CAAmB,YAAnB,CAAZ,CADU;AAEjBf,iBAAOE,WAAYN,KAAKmB,YAAL,CAAmB,YAAnB,CAAZ;AAFU,UAAlB;AAIA,aAAK,sCAAsCnB,KAAKmB,YAAL,CAAmB,WAAnB,CAA3C,EAA6E;AAAE;AAC9EpB,iBAAO,MAAP;AACAG,iBAAOd,IAAP,GAAc,MAAd;AACA,UAHD,MAGO,IAAK,2CAA2CY,KAAKmB,YAAL,CAAmB,WAAnB,CAAhD,EAAkF;AAAE;AAC1FpB,iBAAO,MAAP;AACAG,iBAAOd,IAAP,GAAc,MAAd;AACA1D,YAAEwF,MAAF,CAAUhB,MAAV,EAAkB;AACjBkB,iBAAMC,SAAUrB,KAAKmB,YAAL,CAAmB,WAAnB,CAAV,CADW;AAEjBG,iBAAMtB,KAAKmB,YAAL,CAAmB,WAAnB;AAFW,WAAlB;AAIA;AACD;AACD;;AAED;AACAd,gBAAS/E,UAAUiG,UAAV,EAAT;AACA7F,SAAE8F,IAAF,CAAO;AACNC,gBAAQ,MADF;AAENC,eAAQ,IAFF;AAGNC,aAAQ9F,KAAK+F,UAHP;AAINC,cAAQ;AACPC,iBAAQ,uCADD;AAEPD,eAAQ3B;AAFD,SAJF;AAQN6B,iBAAS,SAASA,OAAT,CAAkBC,GAAlB,EAAwB;AAChC3B,gBAAO4B,MAAP;AACA,aAAIC,SAASxG,EAAGA,EAAEyG,SAAF,CAAaH,GAAb,EAAkB,IAAlB,CAAH,CAAb;;AAEAtG,WAAG0G,SAASC,IAAZ,EAAmBC,MAAnB,CAA2BJ,OAAOK,GAAP,CAAW;AACrCC,mBAAS;AAD4B,UAAX,EAExBC,OAFwB,CAEhB;AACVD,mBAAS;AADC,UAFgB,EAIxB,GAJwB,CAA3B;;AAOA3G,cAAK6G,iBAAL,GAA2B,SAASA,iBAAT,GAA6B;AACvD,cAAIC,OAAOT,MAAX;AACA,iBAAO,SAASU,mBAAT,CAA8Bf,IAA9B,EAAqC;AAC3ChG,gBAAKgH,IAAL,CAAW,gBAAX,EAA6BhB,IAA7B;AACAc,gBAAKF,OAAL,CAAa;AACZD,qBAAS;AADG,YAAb,EAEG,GAFH,EAEQ,SAASM,UAAT,GAAsB;AAC7BH,iBAAKV,MAAL;AACA,YAJD;AAKA,eAAK,gBAAgB,OAAOJ,IAA5B,EAAmC;AAClC;AACA;;AAED,eAAIkB,0BAA2B;AAC7BC,kBAAM,MADuB;AAE7BrD,kBAAM;AAFuB,YAAD,CAG1BkC,KAAKzC,IAHqB,CAA9B;AAAA,eAIC6D,OAASlD,SAAS,MAAX,GAAsB,GAAtB,GAA4B,EAJpC;AAAA,eAKCmD,WAAY,EALb;AAAA,eAMCC,SAAW,SAASA,MAAT,CAAiBC,KAAjB,EAAwBC,KAAxB,EAA+BC,UAA/B,EAA4C;AACtDJ,qBAASK,IAAT,CAAeC,aAAcJ,KAAd,EAAqBC,KAArB,EAA4BC,UAA5B,CAAf;AACAJ,uBAAWA,SAASpC,MAAT,CAAiB,SAAS2C,UAAT,CAAqBC,GAArB,EAA2B;AACtD,oBAAO,CAACtH,KAAMsH,GAAN,CAAR;AACA,aAFU,CAAX;AAGA,YAXF;;AAcA,eAAIlF,QAAQ,CAAE,OAAF,EAAW,OAAX,CAAZ;AACA,mBAASqD,KAAKzC,IAAd;AACC,iBAAK,MAAL;AAAa;AACZZ,sBAAQA,MAAMmF,MAAN,CAAa,CAAE,MAAF,EAAU,MAAV,CAAb,CAAR;AACA,cAAC;AAHH;;AAMA,gBAAM,IAAI/I,IAAI,CAAR,EAAWoC,IAAIwB,MAAMrD,MAA3B,EAAmCP,IAAIoC,CAAvC,EAA0CpC,GAA1C,EAAgD;AAC/C,gBAAIgJ,OAAOpF,MAAM5D,CAAN,CAAX;AACA,gBAAKiH,KAAK5C,cAAL,CAAqB2E,IAArB,CAAL,EAAkC;AACjCT,oBAAQS,IAAR,EAAc/B,KAAK+B,IAAL,CAAd;AACA;AACD;;AAED,eAAIC,qBAAqBd,SAArB,SAAsCG,SAASY,IAAT,CAAe,GAAf,CAAtC,UAAmEb,IAAvE;AACApH,gBAAKiE,GAAL,CAAU,gBAAV,EAA4B+D,YAA5B;AACA,kBAAOhE,SAAUgE,YAAV,EAAwB9D,IAAxB,CAAP;AACA,WA1CD;AA2CA,UA7C0B,EAA3B;AA8CA,SAjEK;AAkENgE,eAAO,SAASA,KAAT,GAAiB;AACvB1D,gBAAO4B,MAAP;AACApG,cAAKkI,KAAL,CAAY,4CAAZ,EAA0DC,SAA1D;AACA;AArEK,QAAP;AAuEA,OA9GiB;AA+GlBC,WAAK,SAASA,GAAT,CAAcrE,SAAd,EAAyBC,QAAzB,EAAmCqE,aAAnC,EAAmD;AACvDrI,YAAKgH,IAAL,CAAW,+BAAX,EAA4CjD,SAA5C;AACA,WAAIM,SAAS,EAAb;AAAA,WACCF,OAAOJ,UAAUK,KADlB;AAAA,WAECF,OAAO,EAFR;AAAA,WAGCnF,IAAK,CAAC,CAHP;AAAA,WAICiD,OAJD;AAAA,WAKCsG,IALD;AAAA,WAMCC,UAND;AAAA,WAOC5F,KAPD;AAAA,WAQC6F,GARD;AAAA,WASCC,QATD;AAAA,WAUCC,UAVD;AAAA,WAWCC,UAXD;AAAA,WAYCC,UAZD;AAAA,WAaCC,QAbD;AAAA,WAcCrE,MAdD;AAeA,WAAK,CAACjE,KAAMwD,UAAUK,KAAhB,CAAD,IAA4BL,UAAUK,KAAV,KAAoBL,UAAUoB,GAA/D,EAAqE;AACpEnF,aAAKiE,GAAL,iEAA0EE,KAAKiB,QAA/E;AACApD,kBAAYmC,QAAQA,KAAKzB,IAAf,IAAyBqB,UAAU+E,IAA7C,CAFoE,CAEjB;AACnD9I,aAAKiE,GAAL,CAAU,mBAAV,EAA+BjC,OAA/B;AACA,YAAKmC,QAAQA,KAAKiB,QAAL,KAAkB,OAA1B,IAAqC/E,UAAUgD,OAAV,CAAmBc,KAAKmB,YAAL,CAAmB,WAAnB,CAAnB,IAAuD,CAAC,CAAlG,EAAsG;AAAE;AACvGpB,gBAAO,MAAP;AACAvB,iBAAQ,EAAR;AACA2F,gBAAOnE,KAAK4E,UAAZ;AACAR,sBAAaD,KAAKhJ,MAAlB;AACA,gBAAO,CAAEP,KAAK,CAAP,IAAawJ,UAApB,EAAiC;AAChCC,gBAAMF,KAAKvJ,CAAL,CAAN;AACA4D,gBAAM6F,IAAIpD,QAAV,IAAsBoD,IAAIQ,SAA1B;AACA;AACDP,oBAAW,SAASA,QAAT,CAAmBlB,KAAnB,EAA0B0B,MAA1B,EAAmC;AAC7C,cAAK1I,KAAM0I,MAAN,KAAkB,CAACA,MAAxB,EAAiC;AAChC1B,6BAAkBA,KAAlB;AACA;AACD,cAAIM,MAAMlF,MAAM4E,KAAN,CAAV;AACA,iBAAO5E,MAAM4E,KAAN,CAAP;AACA,iBAAOM,GAAP;AACA,UAPD;;AAUAa,sBAAa,CAAED,SAAU,aAAV,KAA6B,GAA/B,EAAqC9D,KAArC,CAA4C,GAA5C,CAAb;AACAgE,sBAAa,CAAEF,SAAU,aAAV,KAA6B,GAA/B,EAAqC9D,KAArC,CAA4C,GAA5C,CAAb;AACAiE,sBAAe,MAAMM,KAAKC,GAAL,CAAUR,WAAWtF,OAAX,CAAoB,KAApB,CAAV,EAAuCsF,WAAWtF,OAAX,CAAoB,QAApB,CAAvC,CAAR,IAAqF,MAAM6F,KAAKC,GAAL,CAAUR,WAAWtF,OAAX,CAAoB,OAApB,CAAV,EAAyCsF,WAAWtF,OAAX,CAAoB,MAApB,CAAzC,CAAxG;AACAqF,sBAAa;AACZ,aAAGA,WAAW,CAAX,CADS;AAEZ,aAAGA,WAAW,CAAX;AAFS,UAAb;AAIAC,sBAAa;AACZ,aAAQA,WAAWC,aAAa,CAAb,GAAiB,CAA5B,CADI;AAEZ,aAAQD,WAAWC,aAAa,CAAb,GAAiB,CAA5B,CAFI;AAGZQ,kBAAQR,aAAa,SAAb,GAAyBS;AAHrB,UAAb;;AAMAR,oBAAW,SAASA,QAAT,CAAmBhB,GAAnB,EAAyB;AACnC,cAAK,WAAWA,GAAhB,EAAsB;AACrB,kBAAO,IAAP;AACA;AACD,cAAK,YAAYA,GAAjB,EAAuB;AACtB,kBAAO,KAAP;AACA;AACD,iBAAO,IAAP;AACA,UARD;;AAUA,aAAIyB,iBAAiBb,SAAU,iBAAV,CAArB;AACA,aAAKJ,iBAAiBiB,cAAtB,EAAuC;AACtCA,2BAAiBA,eAAe1H,OAAf,CAAwB,OAAxB,EAAiC,GAAjC,EAAuCA,OAAvC,CAAgD,OAAhD,EAAyD,GAAzD,CAAjB;AACA;;AAEDyC,kBAAS;AACR3B,gBAAkBV,OADV;AAERuH,gBAAkBd,SAAU,MAAV,EAAkB,IAAlB,CAFV;AAGRe,2BAAkBtJ,YAAaoJ,kBAAkBtH,OAA/B,EAAwC,KAAxC,CAHV;AAIRyH,uBAAkBhB,SAAU,aAAV,CAJV;AAKRiB,uBAAkB1J,KAAKU,aAAL,CAAoBsB,QAAQ2H,WAAR,EAApB,CALV;AAMRC,yBAAkBnB,SAAU,eAAV,CANV;AAORoB,4BAAkB3J,YAAauI,SAAU,kBAAV,CAAb,EAA6C,KAA7C,CAPV;AAQRqB,yBAAkBrB,SAAU,eAAV,CARV;AASRsB,4BAAkBtB,SAAU,kBAAV,CATV;AAURlF,gBAAkB,CAAE,UAAF,EAAc,SAAd,EAAyB,UAAzB,EAAsClD,UAAUgD,OAAV,CAAmBoF,SAAU,MAAV,CAAnB,CAAtC,CAVV;AAWRuB,gBAAkB;AACjBC,wBAAkBxB,SAAU,aAAV,CADD;AAEjB,6BAAkB,WAAWA,SAAU,gBAAV,CAFZ;AAGjByB,wBAAkBrB,SAAUJ,SAAU,aAAV,CAAV,CAHD;AAIjB0B,uBAAkBtB,SAAUJ,SAAU,YAAV,CAAV,CAJD;AAKjB2B,sBAAkB3B,SAAU,WAAV,CALD;AAMjB4B,wBAAkB5B,SAAU,aAAV,CAND;AAOjB6B,qBAAkB;AACjBC,gBAAI7B,UADa;AAEjB8B,gBAAI7B;AAFa,YAPD;AAWjBI,uBAAY;AACX0B,kBAAM,EADK;AAEXlB,kBAAM;AAFK,YAXK;AAejBmB,iBAAM;AACLC,gBAAMlC,SAAU,cAAV,CADD;AAELtC,iBAAMsC,SAAU,eAAV,CAFD;AAGLmC,kBAAMnC,SAAU,gBAAV;AAHD,YAfW;AAoBjBoC,qBAAUpC,SAAU,kBAAV;AApBO,WAXV;;AAkCRqC,6CAAmC,YAAarC,SAAU,0BAAV,KAA0C,KAAvD;AAlC3B,UAAT;AAoCA,cAAM1J,CAAN,IAAW4D,KAAX,EAAmB;AAClB,cAAKA,MAAMS,cAAN,CAAsBrE,CAAtB,CAAL,EAAgC;AAC/B,eAAKA,EAAE+C,KAAF,CAAS,aAAT,CAAL,EAA+B;AAC9BuC,mBAAO2F,IAAP,CAAYjB,UAAZ,CAAuBQ,IAAvB,CAA4BxK,EAAE6C,OAAF,CAAW,qBAAX,EAAkC,EAAlC,CAA5B,IAAsEe,MAAM5D,CAAN,CAAtE;AACA,YAFD,MAEO;AACNsF,mBAAO2F,IAAP,CAAYjB,UAAZ,CAAuB0B,IAAvB,CAA4B1L,EAAE6C,OAAF,CAAW,QAAX,EAAqB,EAArB,CAA5B,IAAyDe,MAAM5D,CAAN,CAAzD;AACA;AACD;AACD;AACD,SA5FD,MA4FO;AACN;AACAsF,kBAAS;AACR3B,gBAAkB,EADV;AAER6G,gBAAkB,EAFV;AAGRC,2BAAkB,EAHV;AAIRC,uBAAkB,IAJV;AAKRC,uBAAkB,EALV;AAMRE,yBAAkB,EANV;AAORC,4BAAkB,EAPV;AAQRE,4BAAkB,EARV;AASRxG,gBAAkB,SATV;;AAWRuH,6CAAmC;AAX3B,UAAT;AAaA;AACA,aAAK9I,WAAWA,QAAQ1C,MAAR,GAAiB,CAAjC,EAAqC;AACpC4E,iBAAO,iBAAP;AACAG,mBAASxE,EAAEwF,MAAF,CAAUhB,MAAV,EAAkB;AAC1B3B,iBAAiBV,OADS;AAE1BwH,4BAAiBxH,OAFS;AAG1B0H,wBAAiB1J,KAAKU,aAAL,CAAoBsB,QAAQ2H,WAAR,EAApB;AAHS,WAAlB,CAAT;AAKA,UAPD,MAOO;AACNzF,iBAAO,aAAP;AACA;AACD;AACD;;AAED;AACAM,gBAAS/E,UAAUiG,UAAV,EAAT;AACA7F,SAAE8F,IAAF,CAAO;AACNC,gBAAQ,MADF;AAENC,eAAQ,IAFF;AAGNC,aAAQ9F,KAAK+F,UAHP;AAINC,cAAQ;AACPC,iBAAU,0CADH;AAEPD,eAAU3B,MAFH;AAGP0G,mBAAU/K,KAAKgL;AAHR,SAJF;AASN9E,iBAAS,SAASA,OAAT,CAAkBC,GAAlB,EAAwB;AAChC3B,gBAAO4B,MAAP;AACA,aAAIC,SAASxG,EAAGA,EAAEyG,SAAF,CAAaH,GAAb,EAAkB,IAAlB,CAAH,CAAb;AACAtG,WAAG0G,SAASC,IAAZ,EAAmBC,MAAnB,CAA2BJ,OAAOK,GAAP,CAAW;AACrCC,mBAAS;AAD4B,UAAX,EAExBC,OAFwB,CAEhB;AACVD,mBAAS;AADC,UAFgB,EAIxB,GAJwB,CAA3B;;AAOA3G,cAAKiL,gBAAL,GAA0B,SAASA,gBAAT,GAA4B;AACrD,cAAInE,OAAOT,MAAX;AACA,iBAAO,SAASU,mBAAT,CAA8Bf,IAA9B,EAAqC;AAC3ChG,gBAAKgH,IAAL,CAAW,mBAAX,EAAgChB,IAAhC;AACAc,gBAAKF,OAAL,CAAa;AACZD,qBAAS;AADG,YAAb,EAEG,GAFH,EAEQ,SAASuE,YAAT,GAAwB;AAC/BpE,iBAAKV,MAAL;AACA,YAJD;AAKA,eAAK,gBAAgB,OAAOJ,IAAvB,IAA+B,SAASA,IAA7C,EAAoD;AACnD;AACA;AACD,eAAIqB,WAAY,EAAhB;AAAA,eACC8D,iBAAiBrE,KAAKsE,IAAL,CAAW,yBAAX,EAAuCxG,GAAvC,CAA4C,SAASyG,UAAT,GAAsB;AAClF,mBAAO,KAAK7D,KAAZ;AACA,YAFgB,EAEd8D,OAFc,EADlB;AAAA,eAICtB,OAAShE,KAAKgE,IAAL,IAAa3F,OAAO2F,IAJ9B;AAAA,eAKC1C,SAAW,SAAXA,MAAW,CAAEC,KAAF,EAASC,KAAT,EAAgBC,UAAhB,EAAgC;AAC1CJ,qBAASK,IAAT,CAAeC,aAAcJ,KAAd,EAAqBC,KAArB,EAA4BC,UAA5B,CAAf;AACAJ,uBAAWA,SAASpC,MAAT,CAAiB,SAAS2C,UAAT,CAAqBC,GAArB,EAA2B;AACtD,oBAAO,CAACtH,KAAMsH,GAAN,CAAR;AACA,aAFU,CAAX;AAGA,YAVF;AAAA,eAWC2C,EAXD;AAAA,eAYCe,QAAU,CAAE,MAAF,EAAU,MAAV,CAZX;AAAA,eAaCC,cAAeD,MAAMjM,MAbtB;AAAA,eAcCP,IAAO,CAAC,CAdT;AAAA,eAeC0M,CAfD;AAAA,eAgBCC,MAhBD;AAAA,eAiBCC,OAjBD;AAAA,eAkBCC,YAAe5B,QAAQA,KAAKjB,UAAf,IAA+B,EAlB7C;AAAA,eAmBC7B,YAAiB9G,OAAjB,SAAgC4F,KAAKzC,IAnBtC;AAAA,eAoBC6D,OAAWlD,SAAS,MAAT,IAAmB,MAAMlC,QAAQ1C,MAAnC,GAA8C,GAA9C,GAAoD,EApB9D;;AAsBA,eAAK,CAACiB,KAAMyJ,IAAN,CAAN,EAAoB;AACnB,gBAAKA,KAAK,cAAL,CAAL,EAA2B;AAC1B1C,oBAAQ,kBAAR,EAA4B0C,KAAK,cAAL,CAA5B;AACA;AACD,gBAAKA,KAAK,gBAAL,CAAL,EAA6B;AAC5B1C,oBAAQ,qBAAR,EAA+B,MAA/B;AACA;AACD,gBAAK,CAAC/G,KAAMyJ,KAAKE,WAAX,CAAN,EAAgC;AAC/B5C,oBAAQ,kBAAR,EAA4BvC,OAAQiF,KAAKE,WAAb,CAA5B;AACA;AACD,gBAAK,CAAC3J,KAAMyJ,KAAKG,UAAX,CAAN,EAA+B;AAC9B7C,oBAAQ,iBAAR,EAA2BvC,OAAQiF,KAAKG,UAAb,CAA3B;AACA;AACD,gBAAKH,KAAKI,SAAV,EAAsB;AACrB9C,oBAAQ,gBAAR,EAA0B0C,KAAKI,SAA/B;AACA;AACD,gBAAKJ,KAAKK,WAAV,EAAwB;AACvB/C,oBAAQ,kBAAR,EAA4B0C,KAAKK,WAAjC;AACA;AACD,gBAAKL,KAAKM,QAAV,EAAqB;AACpB,iBAAKN,KAAKM,QAAL,CAAcC,EAAd,IAAoBP,KAAKM,QAAL,CAAcC,EAAd,CAAiB,CAAjB,CAApB,IAA2CP,KAAKM,QAAL,CAAcC,EAAd,CAAiB,CAAjB,CAAhD,EAAqE;AACpEjD,qBAAQ,kBAAR,EAAgC0C,KAAKM,QAAL,CAAcC,EAAd,CAAiB,CAAjB,CAAhC,SAA2DP,KAAKM,QAAL,CAAcC,EAAd,CAAiB,CAAjB,CAA3D;AACA;AACD,iBAAKP,KAAKM,QAAL,CAAcE,EAAd,IAAoBR,KAAKM,QAAL,CAAcE,EAAd,CAAiB,CAAjB,CAApB,IAA2CR,KAAKM,QAAL,CAAcE,EAAd,CAAiB,CAAjB,CAAhD,EAAqE;AACpEA,mBAAK,CAAER,KAAKM,QAAL,CAAcE,EAAd,CAAiB,CAAjB,CAAF,EAAuBR,KAAKM,QAAL,CAAcE,EAAd,CAAiB,CAAjB,CAAvB,CAAL;AACA,kBAAKR,KAAKM,QAAL,CAAcE,EAAd,CAAiBpB,MAAtB,EAA+B;AAC9BoB,kBAAGqB,OAAH;AACA;AACDvE,qBAAQ,kBAAR,EAA4BkD,GAAGvC,IAAH,CAAS,GAAT,CAA5B;AACA;AACD;AACD,gBAAK+B,KAAKU,IAAV,EAAiB;AAChB,iBAAKV,KAAKU,IAAL,CAAU,IAAV,CAAL,EAAsB;AACrBpD,qBAAQ,mBAAR,EAA6B0C,KAAKU,IAAL,CAAU,IAAV,CAA7B;AACA;AACD,iBAAKV,KAAKU,IAAL,CAAUvE,GAAf,EAAqB;AACpBmB,qBAAQ,oBAAR,EAA8B0C,KAAKU,IAAL,CAAUvE,GAAxC;AACA;AACD,iBAAK6D,KAAKU,IAAL,CAAUE,IAAf,EAAsB;AACrBtD,qBAAQ,qBAAR,EAA+B0C,KAAKU,IAAL,CAAUE,IAAzC;AACA;AACD;AACD,gBAAKZ,KAAKa,QAAV,EAAqB;AACpBvD,oBAAQ,uBAAR,EAAiC0C,KAAKa,QAAtC;AACA;AACD,mBAAQ9L,MAAMyM,WAAd,EAA4B;AAC3B,iBAAIjI,OAAOgI,MAAMxM,CAAN,CAAX;AACA,iBAAK6M,UAAUxI,cAAV,CAA0BG,IAA1B,CAAL,EAAuC;AACtC,mBAAMkI,CAAN,IAAWG,UAAUrI,IAAV,CAAX,EAA4B;AAC3B,mBAAKqI,UAAUrI,IAAV,EAAgBH,cAAhB,CAAgCqI,CAAhC,CAAL,EAA0C;AACzCC,yBAASP,eAAe9H,OAAf,CAAwBoI,CAAxB,IAA8B,CAAC,CAA/B,IAAoC,CAACA,EAAEK,UAAF,CAAc,OAAd,CAArC,GAA+D,EAA/D,GAAoE,OAA7E;AACAH,0BAAU,WAAWpI,IAAX,GAAkB,OAAlB,GAA4B,EAAtC;AACA+D,uBAAQoE,SAASC,OAAT,GAAmBF,CAA3B,EAA8BG,UAAUrI,IAAV,EAAgBkI,CAAhB,CAA9B,EAAkD,IAAlD;AACA;AACD;AACD;AACD;AACD;AACD,eAAKzF,KAAKuD,IAAV,EAAiB;AAChBjC,mBAAQ,MAAR,EAAgByE,UAAW/F,KAAKuD,IAAhB,CAAhB;AACA;;AAED,eAAK,eAAevD,KAAKzC,IAAzB,EAAgC;AAC/B,gBAAK,CAACyC,KAAKyD,WAAN,IAAqB,CAACzD,KAAKtD,IAAhC,EAAuC;AACtC;AACA,aAFD,MAEO;AACN4E,oBAAQ,aAAR,EAAuBtB,KAAKyD,WAA5B;AACA,iBAAKzD,KAAKgG,wBAAV,EAAqC;AACpC1E,qBAAQ,0BAAR,EAAoC,MAApC;AACA;AACD;AACD,YATD,MASO,IAAK,cAActB,KAAKzC,IAAxB,EAA+B;AACrC,gBAAK,CAACyC,KAAKwD,eAAN,IAAyB,CAACxD,KAAKtD,IAApC,EAA2C;AAC1C;AACA,aAFD,MAEO;AACN4E,oBAAQ,iBAAR,EAA2Be,gBAAgBrC,KAAKwD,eAAL,CAAqB5H,OAArB,CAA8B,IAA9B,EAAoC,MAApC,EAA6CA,OAA7C,CAAsD,IAAtD,EAA4D,MAA5D,CAAhB,GAAuFoE,KAAKwD,eAAvH,EAAwI,IAAxI;AACA;AACD,YANM,MAMA,IAAK,eAAexD,KAAKzC,IAAzB,EAAgC;AACtC,gBAAK,CAACyC,KAAK4D,aAAN,IAAuB,CAAC5D,KAAK6D,gBAA7B,IAAiD,CAAC7D,KAAKtD,IAA5D,EAAmE;AAClE;AACA,aAFD,MAEO;AACN4E,oBAAQ,eAAR,EAAyBtB,KAAK4D,aAA9B;AACAtC,oBAAQ,kBAAR,EAA4BtB,KAAK6D,gBAAjC,EAAmD,IAAnD;AACA,iBAAK7D,KAAK+D,gBAAV,EAA6B;AAC5BzC,qBAAQ,kBAAR,EAA4BtB,KAAK+D,gBAAjC,EAAmD,IAAnD;AACA;AACD;AACD;AACD,eAAI/B,qBAAqBd,SAArB,SAAsCG,SAASY,IAAT,CAAe,GAAf,CAAtC,SAAkEjC,KAAKtD,IAAvE,UAAoFwE,SAApF,SAAqGE,IAAzG;AACApH,gBAAKiE,GAAL,CAAU,gBAAV,EAA4B+D,YAA5B;AACA,kBAAOhE,SAAUgE,YAAV,EAAwB9D,IAAxB,CAAP;AACA,WA3HD;AA4HA,UA9HyB,EAA1B;AA+HA,SAlJK;AAmJNgE,eAAO,SAASA,KAAT,GAAiB;AACvB1D,gBAAO4B,MAAP;AACApG,cAAKkI,KAAL,CAAY,4CAAZ,EAA0DC,SAA1D;AACA;AAtJK,QAAP;AAwJA;AAvZiB,MAAnB;;AA0ZA,cAAS8D,iBAAT,GAA6B;AAC5B,UAAIC,UAAUrM,EAAG,UAAH,EAAgBsM,GAAhB,CAAqB,CAArB,CAAd;AACA,UAAIC,MAAM;AACTtD,aAAM9I,KAAK+B,iBAAL,CAAwBmK,QAAQ1E,KAAR,CAAc6E,SAAd,CAAyBH,QAAQI,cAAjC,EAAiDJ,QAAQK,YAAzD,CAAxB;AADG,OAAV;AAGAH,UAAII,GAAJ,GAAU3M,EAAEyG,SAAF,CAAa8F,IAAItD,IAAjB,CAAV;AACAsD,UAAIhI,KAAJ,GAAYvE,EAAGuM,IAAII,GAAP,EAAaC,KAAb,GAAqBN,GAArB,CAA0B,CAA1B,CAAZ;AACAC,UAAIjH,GAAJ,GAAUtF,EAAGuM,IAAII,GAAP,EAAaE,IAAb,GAAoBP,GAApB,CAAyB,CAAzB,CAAV;AACA,aAAOC,GAAP;AACA;AACD,cAASzE,YAAT,CAAuBJ,KAAvB,EAA8BC,KAA9B,EAAqCC,UAArC,EAAkD;AACjDD,cAAQzC,OAAQyC,KAAR,EAAgBxC,IAAhB,EAAR;AACA,UAAK,CAACuC,MAAMzF,KAAN,CAAa,YAAb,CAAN,EAAmC;AAClC,cAAO,IAAP;AACA;AACD,aAAW5B,YAAaqH,MAAMvC,IAAN,EAAb,EAA2B,IAA3B,CAAX,YAAsD,CAACzE,KAAMkH,UAAN,CAAD,IAAuBA,UAAvB,GAAoCD,MAAM5F,OAAN,CAAe,IAAf,EAAqB,SAArB,EAAiCA,OAAjC,CAA0C,KAA1C,EAAiD,OAAjD,CAApC,GAAiG1B,YAAasH,KAAb,EAAoB,IAApB,CAAvJ;AACA;AACDmF,WAAMC,SAAN,CAAiB,qBAAjB,EAAwC,SAAxC,EAAmD,SAASC,aAAT,GAAyB;AAC3E7M,WAAK6D,WAAL,CAAiBuE,GAAjB,CAAsB6D,mBAAtB,EAA2CU,MAAMG,aAAjD,EAAgE,IAAhE;AACA,MAFD;AAGAH,WAAMC,SAAN,CAAiB,sBAAjB,EAAyC,UAAzC,EAAqD,SAASC,aAAT,GAAyB;AAC7E7M,WAAK6D,WAAL,CAAiBC,IAAjB,CAAuBmI,mBAAvB,EAA4CU,MAAMG,aAAlD,EAAiE,IAAjE;AACA,MAFD;AAGA,KA9pBD;AA+pBA,IAhqBD,EAgqBIC,UAAUC,EAhqBd;AAkqBC,GAvrB6b,EAurB5b,EAvrB4b,CAAH,EAA3b,EAurBO,EAvrBP,EAurBU,CAAC,CAAD,CAvrBV","file":"tinymce-utils.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/**\n * @file Script loaded as soon a post editor is opened. It contains all basic functions to insert shortcodes\n *\n * @author Gerkin\n * @copyright 2016 GerkinDevelopment\n * @license https://www.gnu.org/licenses/gpl-3.0.html GPLv3\n * @package ithoughts-tooltip-glossary\n *\n * @version 2.7.0\n */\n\n/*global QTags: false, iThoughtsTooltipGlossaryEditor: false */\n\n'use strict';\n\n/**\n * @function initTinyMCEPlugin\n * @description Namespace & register both term & list TinyMCE plugins for iThoughts Tooltip Glossary\n * @param {Object} ithoughts Appropriate version of iThoughts Tooltip Glossary helper\n */\n( function initTinyMCEPlugin( ithoughts ) {\n\tithoughts.$d.ready( function onDocumentReady() {\n\t\tvar $    \t\t\t= ithoughts.$,\n\t\t\titg\t\t\t\t= iThoughtsTooltipGlossary,\n\t\t\titge\t\t\t= iThoughtsTooltipGlossaryEditor,\n\t\t\tstripQuotes\t\t= itg.stripQuotes,\n\t\t\tprefix3\t\t\t= 'ithoughts-tooltip-glossary',\n\t\t\tprefix4\t\t\t= 'itg',\n\t\t\ttipsTypes\t\t= [ 'ithoughts-tooltip-glossary-term', 'ithoughts-tooltip-glossary-tooltip', 'ithoughts-tooltip-glossary-mediatip' ],\n\t\t\thtmlAttrs\t\t= [ 'href' ],\n\t\t\tisNA\t\t\t= ithoughts.isNA;\n\n\t\tithoughts.initLoggers( itge, 'iThoughts Tooltip Glossary', itge.verbosity );\n\t\titge.removeAccents = function removeAccents( s ) {\n\t\t\tvar translateRegex\t= /[¹²³áàâãäåaaaÀÁÂÃÄÅAAAÆccç©CCÇÐÐèéê?ëeeeeeÈÊË?EEEEE€gGiìíîïìiiiÌÍÎÏ?ÌIIIlLnnñNNÑòóôõöoooøÒÓÔÕÖOOOØŒr®Ršs?ßŠS?ùúûüuuuuÙÚÛÜUUUUýÿÝŸžzzŽZZ]/g,\n\t\t\t\ttranslate\t\t= {\n\t\t\t\t\t'¹': '1',\n\t\t\t\t\t'²': '2',\n\t\t\t\t\t'³': '3',\n\t\t\t\t\t'á': 'a',\n\t\t\t\t\t'à': 'a',\n\t\t\t\t\t'â': 'a',\n\t\t\t\t\t'ã': 'a',\n\t\t\t\t\t'ä': 'a',\n\t\t\t\t\t'å': 'a',\n\t\t\t\t\ta:   'a',\n\t\t\t\t\t'À': 'a',\n\t\t\t\t\t'Á': 'a',\n\t\t\t\t\t'Â': 'a',\n\t\t\t\t\t'Ã': 'a',\n\t\t\t\t\t'Ä': 'a',\n\t\t\t\t\t'Å': 'a',\n\t\t\t\t\tA:   'a',\n\t\t\t\t\t'Æ': 'a',\n\t\t\t\t\tc:   'c',\n\t\t\t\t\t'ç': 'c',\n\t\t\t\t\t'©': 'c',\n\t\t\t\t\tC:   'c',\n\t\t\t\t\t'Ç': 'c',\n\t\t\t\t\t'Ð': 'd',\n\t\t\t\t\t'è': 'e',\n\t\t\t\t\t'é': 'e',\n\t\t\t\t\t'ê': 'e',\n\t\t\t\t\t'?': 's',\n\t\t\t\t\t'ë': 'e',\n\t\t\t\t\te:   'e',\n\t\t\t\t\t'È': 'e',\n\t\t\t\t\t'Ê': 'e',\n\t\t\t\t\t'Ë': 'e',\n\t\t\t\t\tE:   'e',\n\t\t\t\t\t'€': 'e',\n\t\t\t\t\tg:   'g',\n\t\t\t\t\tG:   'g',\n\t\t\t\t\ti:   'i',\n\t\t\t\t\t'ì': 'i',\n\t\t\t\t\t'í': 'i',\n\t\t\t\t\t'î': 'i',\n\t\t\t\t\t'ï': 'i',\n\t\t\t\t\t'Ì': 'i',\n\t\t\t\t\t'Í': 'i',\n\t\t\t\t\t'Î': 'i',\n\t\t\t\t\t'Ï': 'i',\n\t\t\t\t\tI:   'i',\n\t\t\t\t\tl:   'l',\n\t\t\t\t\tL:   'l',\n\t\t\t\t\tn:   'n',\n\t\t\t\t\t'ñ': 'n',\n\t\t\t\t\tN:   'n',\n\t\t\t\t\t'Ñ': 'n',\n\t\t\t\t\t'ò': 'o',\n\t\t\t\t\t'ó': 'o',\n\t\t\t\t\t'ô': 'o',\n\t\t\t\t\t'õ': 'o',\n\t\t\t\t\t'ö': 'o',\n\t\t\t\t\to:   'o',\n\t\t\t\t\t'ø': 'o',\n\t\t\t\t\t'Ò': 'o',\n\t\t\t\t\t'Ó': 'o',\n\t\t\t\t\t'Ô': 'o',\n\t\t\t\t\t'Õ': 'o',\n\t\t\t\t\t'Ö': 'o',\n\t\t\t\t\tO:   'o',\n\t\t\t\t\t'Ø': 'o',\n\t\t\t\t\t'Œ': 'o',\n\t\t\t\t\tr:   'r',\n\t\t\t\t\t'®': 'r',\n\t\t\t\t\tR:   'r',\n\t\t\t\t\t'š': 's',\n\t\t\t\t\ts:   's',\n\t\t\t\t\t'ß': 's',\n\t\t\t\t\t'Š': 's',\n\t\t\t\t\tS:   's',\n\t\t\t\t\t'ù': 'u',\n\t\t\t\t\t'ú': 'u',\n\t\t\t\t\t'û': 'u',\n\t\t\t\t\t'ü': 'u',\n\t\t\t\t\tu:   'u',\n\t\t\t\t\t'Ù': 'u',\n\t\t\t\t\t'Ú': 'u',\n\t\t\t\t\t'Û': 'u',\n\t\t\t\t\t'Ü': 'u',\n\t\t\t\t\tU:   'u',\n\t\t\t\t\t'ý': 'y',\n\t\t\t\t\t'ÿ': 'y',\n\t\t\t\t\t'Ý': 'y',\n\t\t\t\t\t'Ÿ': 'y',\n\t\t\t\t\t'ž': 'z',\n\t\t\t\t\tz:   'z',\n\t\t\t\t\t'Ž': 'z',\n\t\t\t\t\tZ:   'z',\n\t\t\t\t};\n\t\t\treturn s.replace( translateRegex, function doReplace( match ) {\n\t\t\t\treturn translate[match];\n\t\t\t});\n\t\t};\n\n\t\titge.replaceShortcodes = function replaceShortcodes( content ) {\n\t\t\tvar repLength = itge.replaceShortcodesEl.length,\n\t\t\t\ti = -1;\n\t\t\twhile (( i += 1 ) < repLength ) {\n\t\t\t\tcontent = itge.replaceShortcodesEl[i]( content );\n\t\t\t}\n\t\t\treturn content;\n\t\t};\n\t\titge.restoreShortcodes = function restoreShortcodes( content ) {\n\t\t\tvar resLength = itge.restoreShortcodesEl.length,\n\t\t\t\ti = -1;\n\t\t\twhile (( i += 1 ) < resLength ) {\n\t\t\t\tcontent = itge.restoreShortcodesEl[i]( content );\n\t\t\t}\n\t\t\treturn content;\n\t\t};\n\t\titge.replaceShortcodesEl = [\n\t\t\tfunction replaceShortcodeElGlossary( content ) { // For [glossary]\n\t\t\t\treturn content.replace( /\\[(?:itg-)?(glossary|tooltip|mediatip)(?!_)(.*?)\\](.*?)\\[\\/(?:itg-)?(glossary|tooltip|mediatip)\\]/g, function doReplace( all, balise, inner, text ) {\n\t\t\t\t\tvar attrs\t= {},\n\t\t\t\t\t\tregex\t= /([\\w\\d\\-]+?)=\"(.+?)\"/g,\n\t\t\t\t\t\tmatched\t= null,\n\t\t\t\t\t\tret\t\t= `<a data-type=\"${  prefix3  }-${  {\n\t\t\t\t\t\t\tglossary: 'term',\n\t\t\t\t\t\t\ttooltip:  'tooltip',\n\t\t\t\t\t\t\tmediatip: 'mediatip',\n\t\t\t\t\t\t}[balise]  }\"`,\n\t\t\t\t\t\ti;\n\t\t\t\t\twhile ( true === Boolean( matched = regex.exec( inner ))) {\n\t\t\t\t\t\tattrs[matched[1]] = matched[2];\n\t\t\t\t\t}\n\t\t\t\t\tfor ( i in attrs ) {\n\t\t\t\t\t\tif ( attrs.hasOwnProperty( i )) {\n\t\t\t\t\t\t\tif ( htmlAttrs.indexOf( i ) > -1 || 0 === i.indexOf( 'data-' )) {\n\t\t\t\t\t\t\t\tret += ` ${  i  }=\"${  attrs[i]  }\"`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tret += ` data-${  i  }=\"${  attrs[i]  }\"`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn `${ ret  }>${  text  }</a>`;\n\t\t\t\t});\n\t\t\t},\n\t\t\tfunction replaceShortcodeElList( content ) { // For [glossary_(term_list|atoz)]\n\t\t\t\treturn content.replace( /\\[glossary_(term_list|atoz)(.*?)\\/\\]/g, function doReplace( all, type, attrStr ) {\n\t\t\t\t\tvar attrs\t= {},\n\t\t\t\t\t\tregex\t= /([\\w\\d\\-]+?)=\"(.+?)\"/g,\n\t\t\t\t\t\tmatched\t= null,\n\t\t\t\t\t\tret\t\t= `<span data-type=\"${  prefix3  }-${  type  }\"`,\n\t\t\t\t\t\ti;\n\t\t\t\t\twhile ( true === Boolean( matched = regex.exec( attrStr ))) {\n\t\t\t\t\t\tattrs[matched[1]] = matched[2];\n\t\t\t\t\t}\n\t\t\t\t\tfor ( i in attrs ) {\n\t\t\t\t\t\tif ( attrs.hasOwnProperty( i )) {\n\t\t\t\t\t\t\tif ( htmlAttrs.indexOf( i ) > -1 || 0 === i.indexOf( 'data-' )) {\n\t\t\t\t\t\t\t\tret += ` ${  i  }=\"${  attrs[i]  }\"`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tret += ` data-${  i  }=\"${  attrs[i]  }\"`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn `${ ret  }>Glossary ${  ( 'term_list' === type ) ? 'List' : 'A-to-Z'  }</span>`;\n\t\t\t\t});\n\t\t\t},\n\t\t];\n\t\titge.restoreShortcodesEl = [\n\t\t\tfunction restoreShortcodeElGlossary( content ) { // For [glossary]\n\t\t\t\treturn content.replace( /<a\\s+(?=[^>]*data-type=\"ithoughts-tooltip-glossary-(term|tooltip|mediatip)\")(.*?)>(.*?)<\\/a>/g, function doReplace( all, type, inner, text ) {\n\t\t\t\t\tvar attrs\t= {},\n\t\t\t\t\t\tregex\t= /(data-)?([\\w\\d\\-]+?)=\"(.+?)\"/g,\n\t\t\t\t\t\tmatched\t= null,\n\t\t\t\t\t\tb\t\t= {\n\t\t\t\t\t\t\tterm:     'glossary',\n\t\t\t\t\t\t\ttooltip:  'tooltip',\n\t\t\t\t\t\t\tmediatip: 'mediatip',\n\t\t\t\t\t\t}[type],\n\t\t\t\t\t\tret\t\t= `[${  prefix4  }-${  b }`,\n\t\t\t\t\t\ti;\n\t\t\t\t\twhile ( true === Boolean( matched = regex.exec( inner ))) {\n\t\t\t\t\t\tif ( matched[1] !== 'data-' || matched[2] !== 'type' ) {\n\t\t\t\t\t\t\tif ( htmlAttrs.indexOf( matched[2]) > -1 && typeof matched[1] !== 'undefined' ) {\n\t\t\t\t\t\t\t\tattrs[matched[1] + matched[2]] = matched[3];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tattrs[matched[2]] = matched[3];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor ( i in attrs ) {\n\t\t\t\t\t\tif ( attrs.hasOwnProperty( i )) {\n\t\t\t\t\t\t\tret += ` ${  i  }=\"${  attrs[i]  }\"`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn `${ ret  }]${  text  }[/${  prefix4  }-${  b  }]`;\n\t\t\t\t});\n\t\t\t},\n\t\t\tfunction restoreShortcodeElList( content ) { // For [glossary_(term_list|atoz)]\n\t\t\t\treturn content.replace( /<span\\s+(?=[^>]*data-type=\"ithoughts-tooltip-glossary-(term_list|atoz)\")(.*?)>.*?<\\/span>/g, function doReplace( all, type, attrStr ) {\n\t\t\t\t\tvar attrs\t= {},\n\t\t\t\t\t\tregex\t= /(data-)?([\\w\\d\\-]+?)=\"(.+?)\"/g,\n\t\t\t\t\t\tmatched\t= null,\n\t\t\t\t\t\tret\t\t= `[glossary_${  type }`,\n\t\t\t\t\t\ti;\n\t\t\t\t\twhile ( true === Boolean( matched = regex.exec( attrStr ))) {\n\t\t\t\t\t\tif ( matched[1] !== 'data-' || matched[2] !== 'type' ) {\n\t\t\t\t\t\t\tif ( htmlAttrs.indexOf( i ) > -1 && typeof matched[1] !== 'undefined' ) {\n\t\t\t\t\t\t\t\tattrs[matched[1] + matched[2]] = matched[3];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tattrs[matched[2]] = matched[3];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor ( i in attrs ) {\n\t\t\t\t\t\tif ( attrs.hasOwnProperty( i )) {\n\t\t\t\t\t\t\tret += ` ${  i  }=\"${  attrs[i]  }\"`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn `${ ret  }/]`;\n\t\t\t\t});\n\t\t\t},\n\t\t];\n\n\t\titge.editorForms = {\n\t\t\tlist: function list( selection, callback ) {\n\t\t\t\titge.log( 'Selection infos to load TIP: ', selection );\n\t\t\t\tvar mode = 'insert_content',\n\t\t\t\t\tnode\t= selection.start,\n\t\t\t\t\tvalues = {\n\t\t\t\t\t\ttype:  'atoz',\n\t\t\t\t\t\talpha: [],\n\t\t\t\t\t\tgroup: [],\n\t\t\t\t\t},\n\t\t\t\t\tloader;\n\t\t\t\tfunction trimFilter( attrsStr ) {\n\t\t\t\t\treturn ( attrsStr||'' ).split( ',' ).map( Function.prototype.call, String.prototype.trim ).filter( function filterNonNullAttr( e ) {\n\t\t\t\t\t\treturn e;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif ( !isNA( selection.start ) && selection.start === selection.end ) {\n\t\t\t\t\titge.log( `Start & End node are the same, operating on a node of type ${  node.nodeName }` );\n\t\t\t\t\tif ( node && node.nodeName !== '#text' ) {\n\t\t\t\t\t\t$.extend( values, {\n\t\t\t\t\t\t\talpha: trimFilter( node.getAttribute( 'data-alpha' )),\n\t\t\t\t\t\t\tgroup: trimFilter( node.getAttribute( 'data-group' )),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif ( 'ithoughts-tooltip-glossary-atoz' === node.getAttribute( 'data-type' )) { // Is atoz\n\t\t\t\t\t\t\tmode = 'load';\n\t\t\t\t\t\t\tvalues.type = 'atoz';\n\t\t\t\t\t\t} else if ( 'ithoughts-tooltip-glossary-term_list' === node.getAttribute( 'data-type' )) { // Is term_list\n\t\t\t\t\t\t\tmode = 'load';\n\t\t\t\t\t\t\tvalues.type = 'list';\n\t\t\t\t\t\t\t$.extend( values, {\n\t\t\t\t\t\t\t\tcols: parseInt( node.getAttribute( 'data-cols' )),\n\t\t\t\t\t\t\t\tdesc: node.getAttribute( 'data-desc' ),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Then generate form through Ajax\n\t\t\t\tloader = ithoughts.makeLoader();\n\t\t\t\t$.ajax({\n\t\t\t\t\tmethod:\t'POST',\n\t\t\t\t\tasync:  true,\n\t\t\t\t\turl:    itge.admin_ajax,\n\t\t\t\t\tdata:   {\n\t\t\t\t\t\taction: 'ithoughts_tt_gl_get_tinymce_list_form',\n\t\t\t\t\t\tdata:   values,\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function success( out ) {\n\t\t\t\t\t\tloader.remove();\n\t\t\t\t\t\tvar newDom = $( $.parseHTML( out, true ));\n\n\t\t\t\t\t\t$( document.body ).append( newDom.css({\n\t\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\t}).animate({\n\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t}, 500 ));\n\n\n\t\t\t\t\t\titge.finishListTinymce = ( function finishListTinymce() {\n\t\t\t\t\t\t\tvar domC = newDom;\n\t\t\t\t\t\t\treturn function handleFormSubmitted( data ) {\n\t\t\t\t\t\t\t\titge.info( 'New list data:', data );\n\t\t\t\t\t\t\t\tdomC.animate({\n\t\t\t\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\t\t\t}, 500, function animateEnd() {\n\t\t\t\t\t\t\t\t\tdomC.remove();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif ( 'undefined' === typeof data ) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar shortcode = `glossary_${  ({\n\t\t\t\t\t\t\t\t\t\tatoz: 'atoz',\n\t\t\t\t\t\t\t\t\t\tlist: 'term_list',\n\t\t\t\t\t\t\t\t\t})[data.type] }`,\n\t\t\t\t\t\t\t\t\ttail = ( mode !== 'load' ) ? ' ' : '',\n\t\t\t\t\t\t\t\t\toptsStrs\t\t= [],\n\t\t\t\t\t\t\t\t\taddOpt\t\t\t= function addOpt( label, value, specEncode ) {\n\t\t\t\t\t\t\t\t\t\toptsStrs.push( generateAttr( label, value, specEncode ));\n\t\t\t\t\t\t\t\t\t\toptsStrs = optsStrs.filter( function filterNoNA( val ) {\n\t\t\t\t\t\t\t\t\t\t\treturn !isNA( val );\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t};\n\n\n\t\t\t\t\t\t\t\tvar attrs = [ 'alpha', 'group' ];\n\t\t\t\t\t\t\t\tswitch ( data.type ) {\n\t\t\t\t\t\t\t\t\tcase 'list': {\n\t\t\t\t\t\t\t\t\t\tattrs = attrs.concat([ 'cols', 'desc' ]);\n\t\t\t\t\t\t\t\t\t} break;\n\t\t\t\t\t\t\t\t\t\t\t\t   }\n\n\t\t\t\t\t\t\t\tfor ( var i = 0, I = attrs.length; i < I; i++ ) {\n\t\t\t\t\t\t\t\t\tvar attr = attrs[i];\n\t\t\t\t\t\t\t\t\tif ( data.hasOwnProperty( attr )) {\n\t\t\t\t\t\t\t\t\t\taddOpt( attr, data[attr]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar finalContent = `[${  shortcode  } ${  optsStrs.join( ' ' )  }/]${  tail }`;\n\t\t\t\t\t\t\t\titge.log( 'Final content:', finalContent );\n\t\t\t\t\t\t\t\treturn callback( finalContent, mode );\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}());\n\t\t\t\t\t},\n\t\t\t\t\terror: function error() {\n\t\t\t\t\t\tloader.remove();\n\t\t\t\t\t\titge.error( 'Error while getting TinyMCE form for Tip: ', arguments );\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t\ttip: function tip( selection, callback, escapeContent ) {\n\t\t\t\titge.info( 'Selection infos to load TIP: ', selection );\n\t\t\t\tvar values\t= {},\n\t\t\t\t\tnode\t= selection.start,\n\t\t\t\t\tmode\t= '',\n\t\t\t\t\ti\t\t= -1,\n\t\t\t\t\tcontent,\n\t\t\t\t\tatts,\n\t\t\t\t\tattsLength,\n\t\t\t\t\tattrs,\n\t\t\t\t\tatt,\n\t\t\t\t\ttakeAttr,\n\t\t\t\t\tpositionAt,\n\t\t\t\t\tpositionMy,\n\t\t\t\t\tmyInverted,\n\t\t\t\t\ttristate,\n\t\t\t\t\tloader;\n\t\t\t\tif ( !isNA( selection.start ) && selection.start === selection.end ) {\n\t\t\t\t\titge.log( `Start & End node are the same, operating on a node of type ${  node.nodeName }` );\n\t\t\t\t\tcontent = ( node && node.text ) || selection.html; // Get node text if any or get selection\n\t\t\t\t\titge.log( 'Loading content: ', content );\n\t\t\t\t\tif ( node && node.nodeName !== '#text' && tipsTypes.indexOf( node.getAttribute( 'data-type' )) > -1 ) { // On Glossary Term or Tooltip or Mediatip, load data\n\t\t\t\t\t\tmode = 'load';\n\t\t\t\t\t\tattrs = {};\n\t\t\t\t\t\tatts = node.attributes;\n\t\t\t\t\t\tattsLength = atts.length;\n\t\t\t\t\t\twhile (( i += 1 ) < attsLength ) {\n\t\t\t\t\t\t\tatt = atts[i];\n\t\t\t\t\t\t\tattrs[att.nodeName] = att.nodeValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttakeAttr = function takeAttr( label, nodata ) {\n\t\t\t\t\t\t\tif ( isNA( nodata ) || !nodata ) {\n\t\t\t\t\t\t\t\tlabel = `data-${  label }`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar val = attrs[label];\n\t\t\t\t\t\t\tdelete attrs[label];\n\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t};\n\n\n\t\t\t\t\t\tpositionAt = ( takeAttr( 'position-at' ) || ' ' ).split( ' ' );\n\t\t\t\t\t\tpositionMy = ( takeAttr( 'position-my' ) || ' ' ).split( ' ' );\n\t\t\t\t\t\tmyInverted = ( 1 === Math.max( positionMy.indexOf( 'top' ), positionMy.indexOf( 'bottom' ))) || ( 0 === Math.max( positionMy.indexOf( 'right' ), positionMy.indexOf( 'left' )));\n\t\t\t\t\t\tpositionAt = {\n\t\t\t\t\t\t\t1: positionAt[0],\n\t\t\t\t\t\t\t2: positionAt[1],\n\t\t\t\t\t\t};\n\t\t\t\t\t\tpositionMy = {\n\t\t\t\t\t\t\t1:      positionMy[myInverted ? 1 : 0],\n\t\t\t\t\t\t\t2:      positionMy[myInverted ? 0 : 1],\n\t\t\t\t\t\t\tinvert: myInverted ? 'enabled' : undefined,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\ttristate = function tristate( val ) {\n\t\t\t\t\t\t\tif ( 'true' === val ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( 'false' === val ) {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tvar tooltipContent = takeAttr( 'tooltip-content' );\n\t\t\t\t\t\tif ( escapeContent && tooltipContent ) {\n\t\t\t\t\t\t\ttooltipContent = tooltipContent.replace( /&lt;/g, '<' ).replace( /&gt;/g, '>' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvalues = {\n\t\t\t\t\t\t\ttext:             content,\n\t\t\t\t\t\t\tlink:             takeAttr( 'href', true ),\n\t\t\t\t\t\t\ttooltip_content:  stripQuotes( tooltipContent || content, false ),\n\t\t\t\t\t\t\tglossary_id:      takeAttr( 'glossary-id' ),\n\t\t\t\t\t\t\tterm_search:      itge.removeAccents( content.toLowerCase()),\n\t\t\t\t\t\t\tmediatip_type:    takeAttr( 'mediatip-type' ),\n\t\t\t\t\t\t\tmediatip_content: stripQuotes( takeAttr( 'mediatip-content' ), false ),\n\t\t\t\t\t\t\tmediatip_link:    takeAttr( 'mediatip-link' ),\n\t\t\t\t\t\t\tmediatip_caption: takeAttr( 'mediatip-caption' ),\n\t\t\t\t\t\t\ttype:             [ 'glossary', 'tooltip', 'mediatip' ][tipsTypes.indexOf( takeAttr( 'type' ))],\n\t\t\t\t\t\t\topts:             {\n\t\t\t\t\t\t\t\ttermcontent:      takeAttr( 'termcontent' ),\n\t\t\t\t\t\t\t\t'qtip-keep-open': 'true' === takeAttr( 'qtip-keep-open' ),\n\t\t\t\t\t\t\t\tqtiprounded:      tristate( takeAttr( 'qtiprounded' )),\n\t\t\t\t\t\t\t\tqtipshadow:       tristate( takeAttr( 'qtipshadow' )),\n\t\t\t\t\t\t\t\tqtipstyle:        takeAttr( 'qtipstyle' ),\n\t\t\t\t\t\t\t\tqtiptrigger:      takeAttr( 'qtiptrigger' ),\n\t\t\t\t\t\t\t\tposition:         {\n\t\t\t\t\t\t\t\t\tat:\tpositionAt,\n\t\t\t\t\t\t\t\t\tmy:\tpositionMy,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tattributes:\t{\n\t\t\t\t\t\t\t\t\tspan: {},\n\t\t\t\t\t\t\t\t\tlink:\t{},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tanim: {\n\t\t\t\t\t\t\t\t\tin:   takeAttr( 'animation_in' ),\n\t\t\t\t\t\t\t\t\tout:  takeAttr( 'animation_out' ),\n\t\t\t\t\t\t\t\t\ttime: takeAttr( 'animation_time' ),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tmaxwidth: takeAttr( 'tooltip-maxwidth' ),\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\tglossary_disable_auto_translation: 'true' === ( takeAttr( 'disable_auto_translation' ) || false ),\n\t\t\t\t\t\t};\n\t\t\t\t\t\tfor ( i in attrs ) {\n\t\t\t\t\t\t\tif ( attrs.hasOwnProperty( i )) {\n\t\t\t\t\t\t\t\tif ( i.match( /^data-link-/ )) {\n\t\t\t\t\t\t\t\t\tvalues.opts.attributes.link[i.replace( /^data-link-(data-)?/, '' )] = attrs[i];\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tvalues.opts.attributes.span[i.replace( /^data-/, '' )] = attrs[i];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Create new glossary term\n\t\t\t\t\t\tvalues\t= {\n\t\t\t\t\t\t\ttext:             '',\n\t\t\t\t\t\t\tlink:             '',\n\t\t\t\t\t\t\ttooltip_content:  '',\n\t\t\t\t\t\t\tglossary_id:      null,\n\t\t\t\t\t\t\tterm_search:      '',\n\t\t\t\t\t\t\tmediatip_type:    '',\n\t\t\t\t\t\t\tmediatip_content: '',\n\t\t\t\t\t\t\tmediatip_caption: '',\n\t\t\t\t\t\t\ttype:             'tooltip',\n\n\t\t\t\t\t\t\tglossary_disable_auto_translation:\tfalse,\n\t\t\t\t\t\t};\n\t\t\t\t\t\t// If something is selected, load the content as text, content for tooltip & search\n\t\t\t\t\t\tif ( content && content.length > 0 ) {\n\t\t\t\t\t\t\tmode\t= 'replace_content';\n\t\t\t\t\t\t\tvalues\t= $.extend( values, {\n\t\t\t\t\t\t\t\ttext:            content,\n\t\t\t\t\t\t\t\ttooltip_content: content,\n\t\t\t\t\t\t\t\tterm_search:     itge.removeAccents( content.toLowerCase()),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmode\t= 'add_content';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Then generate form through Ajax\n\t\t\t\tloader = ithoughts.makeLoader();\n\t\t\t\t$.ajax({\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tasync:  true,\n\t\t\t\t\turl:    itge.admin_ajax,\n\t\t\t\t\tdata:   {\n\t\t\t\t\t\taction:\t  'ithoughts_tt_gl_get_tinymce_tooltip_form',\n\t\t\t\t\t\tdata:     values,\n\t\t\t\t\t\t_wpnonce: itge.nonce,\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function success( out ) {\n\t\t\t\t\t\tloader.remove();\n\t\t\t\t\t\tvar newDom = $( $.parseHTML( out, true ));\n\t\t\t\t\t\t$( document.body ).append( newDom.css({\n\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t}).animate({\n\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t}, 500 ));\n\n\n\t\t\t\t\t\titge.finishTipTinymce = ( function finishTipTinymce() {\n\t\t\t\t\t\t\tvar domC = newDom;\n\t\t\t\t\t\t\treturn function handleFormSubmitted( data ) {\n\t\t\t\t\t\t\t\titge.info( 'New tooltip data:', data );\n\t\t\t\t\t\t\t\tdomC.animate({\n\t\t\t\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\t\t\t}, 500, function animateAfter() {\n\t\t\t\t\t\t\t\t\tdomC.remove();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif ( 'undefined' === typeof data || null === data ) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar optsStrs\t\t= [],\n\t\t\t\t\t\t\t\t\tattributesList\t= domC.find( '#attributes-list option' ).map( function domToValue() {\n\t\t\t\t\t\t\t\t\t\treturn this.value;\n\t\t\t\t\t\t\t\t\t}).toArray(),\n\t\t\t\t\t\t\t\t\topts\t\t\t= data.opts || values.opts,\n\t\t\t\t\t\t\t\t\taddOpt\t\t\t= ( label, value, specEncode ) => {\n\t\t\t\t\t\t\t\t\t\toptsStrs.push( generateAttr( label, value, specEncode ));\n\t\t\t\t\t\t\t\t\t\toptsStrs = optsStrs.filter( function filterNoNA( val ) {\n\t\t\t\t\t\t\t\t\t\t\treturn !isNA( val );\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tmy,\n\t\t\t\t\t\t\t\t\ttypes\t\t\t= [ 'span', 'link' ],\n\t\t\t\t\t\t\t\t\ttypesLength\t\t= types.length,\n\t\t\t\t\t\t\t\t\ti\t\t\t\t= -1,\n\t\t\t\t\t\t\t\t\tj,\n\t\t\t\t\t\t\t\t\tprefix,\n\t\t\t\t\t\t\t\t\tmidPart,\n\t\t\t\t\t\t\t\t\toptsAttrs\t\t= ( opts && opts.attributes ) || {},\n\t\t\t\t\t\t\t\t\tshortcode\t\t= `${ prefix4  }-${  data.type }`,\n\t\t\t\t\t\t\t\t\ttail\t\t\t= ( mode !== 'load' && 0 === content.length ) ? ' ' : '';\n\n\t\t\t\t\t\t\t\tif ( !isNA( opts )) {\n\t\t\t\t\t\t\t\t\tif ( opts['qtip-content']) {\n\t\t\t\t\t\t\t\t\t\taddOpt( 'data-termcontent', opts['qtip-content']);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( opts['qtip-keep-open']) {\n\t\t\t\t\t\t\t\t\t\taddOpt( 'data-qtip-keep-open', 'true' );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( !isNA( opts.qtiprounded )) {\n\t\t\t\t\t\t\t\t\t\taddOpt( 'data-qtiprounded', String( opts.qtiprounded ));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( !isNA( opts.qtipshadow )) {\n\t\t\t\t\t\t\t\t\t\taddOpt( 'data-qtipshadow', String( opts.qtipshadow ));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( opts.qtipstyle ) {\n\t\t\t\t\t\t\t\t\t\taddOpt( 'data-qtipstyle', opts.qtipstyle );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( opts.qtiptrigger ) {\n\t\t\t\t\t\t\t\t\t\taddOpt( 'data-qtiptrigger', opts.qtiptrigger );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( opts.position ) {\n\t\t\t\t\t\t\t\t\t\tif ( opts.position.at && opts.position.at[1] && opts.position.at[2]) {\n\t\t\t\t\t\t\t\t\t\t\taddOpt( 'data-position-at', `${ opts.position.at[1]  } ${  opts.position.at[2] }` );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif ( opts.position.my && opts.position.my[1] && opts.position.my[2]) {\n\t\t\t\t\t\t\t\t\t\t\tmy = [ opts.position.my[1], opts.position.my[2] ];\n\t\t\t\t\t\t\t\t\t\t\tif ( opts.position.my.invert ) {\n\t\t\t\t\t\t\t\t\t\t\t\tmy.reverse();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\taddOpt( 'data-position-my', my.join( ' ' ));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( opts.anim ) {\n\t\t\t\t\t\t\t\t\t\tif ( opts.anim['in']) {\n\t\t\t\t\t\t\t\t\t\t\taddOpt( 'data-animation_in', opts.anim['in']);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif ( opts.anim.out ) {\n\t\t\t\t\t\t\t\t\t\t\taddOpt( 'data-animation_out', opts.anim.out );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif ( opts.anim.time ) {\n\t\t\t\t\t\t\t\t\t\t\taddOpt( 'data-animation_time', opts.anim.time );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( opts.maxwidth ) {\n\t\t\t\t\t\t\t\t\t\taddOpt( 'data-tooltip-maxwidth', opts.maxwidth );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\twhile ( i++ < typesLength ) {\n\t\t\t\t\t\t\t\t\t\tvar type = types[i];\n\t\t\t\t\t\t\t\t\t\tif ( optsAttrs.hasOwnProperty( type )) {\n\t\t\t\t\t\t\t\t\t\t\tfor ( j in optsAttrs[type]) {\n\t\t\t\t\t\t\t\t\t\t\t\tif ( optsAttrs[type].hasOwnProperty( j )) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tprefix = attributesList.indexOf( j ) > -1 && !j.startsWith( 'data-' ) ? '' : 'data-';\n\t\t\t\t\t\t\t\t\t\t\t\t\tmidPart = 'link' === type ? 'link-' : '';\n\t\t\t\t\t\t\t\t\t\t\t\t\taddOpt( prefix + midPart + j, optsAttrs[type][j], true );\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( data.link ) {\n\t\t\t\t\t\t\t\t\taddOpt( 'href', encodeURI( data.link ));\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( 'glossary' === data.type ) {\n\t\t\t\t\t\t\t\t\tif ( !data.glossary_id || !data.text ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\taddOpt( 'glossary-id', data.glossary_id );\n\t\t\t\t\t\t\t\t\t\tif ( data.disable_auto_translation ) {\n\t\t\t\t\t\t\t\t\t\t\taddOpt( 'disable_auto_translation', 'true' );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if ( 'tooltip' === data.type ) {\n\t\t\t\t\t\t\t\t\tif ( !data.tooltip_content || !data.text ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\taddOpt( 'tooltip-content', escapeContent ? data.tooltip_content.replace( /</g, '&lt;' ).replace( />/g, '&gt;' ) : data.tooltip_content, true );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if ( 'mediatip' === data.type ) {\n\t\t\t\t\t\t\t\t\tif ( !data.mediatip_type || !data.mediatip_content || !data.text ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\taddOpt( 'mediatip-type', data.mediatip_type );\n\t\t\t\t\t\t\t\t\t\taddOpt( 'mediatip-content', data.mediatip_content, true );\n\t\t\t\t\t\t\t\t\t\tif ( data.mediatip_caption ) {\n\t\t\t\t\t\t\t\t\t\t\taddOpt( 'mediatip-caption', data.mediatip_caption, true );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar finalContent = `[${  shortcode  } ${  optsStrs.join( ' ' )  }]${  data.text  }[/${  shortcode  }]${  tail }`;\n\t\t\t\t\t\t\t\titge.log( 'Final content:', finalContent );\n\t\t\t\t\t\t\t\treturn callback( finalContent, mode );\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}());\n\t\t\t\t\t},\n\t\t\t\t\terror: function error() {\n\t\t\t\t\t\tloader.remove();\n\t\t\t\t\t\titge.error( 'Error while getting TinyMCE form for Tip: ', arguments );\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t};\n\n\t\tfunction generateSelObject() {\n\t\t\tvar txtarea = $( '#content' ).get( 0 );\n\t\t\tvar sel = {\n\t\t\t\thtml: itge.replaceShortcodes( txtarea.value.substring( txtarea.selectionStart, txtarea.selectionEnd )),\n\t\t\t};\n\t\t\tsel.DOM = $.parseHTML( sel.html );\n\t\t\tsel.start = $( sel.DOM ).first().get( 0 );\n\t\t\tsel.end = $( sel.DOM ).last().get( 0 );\n\t\t\treturn sel;\n\t\t}\n\t\tfunction generateAttr( label, value, specEncode ) {\n\t\t\tvalue = String( value ).trim();\n\t\t\tif ( !label.match( /^[\\w_\\-]*$/ )) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn `${ stripQuotes( label.trim(), true )  }=\"${   !isNA( specEncode ) && specEncode ? value.replace( /\"/g, '&aquot;' ).replace( /\\n/g, '<br/>' ) : stripQuotes( value, true )  }\"`;\n\t\t}\n\t\tQTags.addButton( 'ithoughts_tt_gl-tip', 'ITG Tip', function onClickButton() {\n\t\t\titge.editorForms.tip( generateSelObject(), QTags.insertContent, true );\n\t\t});\n\t\tQTags.addButton( 'ithoughts_tt_gl-list', 'ITG List', function onClickButton() {\n\t\t\titge.editorForms.list( generateSelObject(), QTags.insertContent, true );\n\t\t});\n\t});\n})( iThoughts.v5 );\n\n},{}]},{},[1]);\n"]}